webpackJsonp([1],{1563:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(2174);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(a).default}})},1565:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.NUM_OF_PHOTO_INFO_VIEWS="unsplash:num-of-photo-info-views",t.HAS_DOWNLOADED_A_PHOTO="has-downloaded-a-photo"},1566:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(1587);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(a).default}})},1567:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){var t={children:r.PropTypes.node,delay:r.PropTypes.number,wrapperClassName:r.PropTypes.string,targetWrapperClassName:r.PropTypes.string,mode:r.PropTypes.oneOf(["mount","visibility"]),onExit:r.PropTypes.func},o={mode:"mount"},n=function(o){function n(){var e=o.call(this)||this;return e.handleMouseMove=e.handleMouseMove.bind(e),e.handleMouseLeave=e.handleMouseLeave.bind(e),e.state={isHovering:!1},e}return d(n,o),n.prototype.shouldComponentUpdate=function(e,t){var o=!(0,u.default)(this.props,e),n=this.state.isHovering!==t.isHovering;return o||n},n.prototype.handleMouseMove=function(){var e=this;this.state.isHovering||this.hoverTimerId||(this.hoverTimerId=window.setTimeout(function(){e.hoverTimerId=null,e.setState({isHovering:!0})},this.props.delay))},n.prototype.handleMouseLeave=function(){this.hoverTimerId&&(window.clearTimeout(this.hoverTimerId),this.hoverTimerId=null),this.setState({isHovering:!1},this.props.onExit)},n.prototype.renderHoverContents=function(){var o=this.state.isHovering,n=this.props,a=n.mode,r=n.targetWrapperClassName,l=(0,c.default)(this.props,Object.keys(t));return"visibility"===a?i.default.createElement("span",{className:r,style:{visibility:o?"visible":"hidden"}},i.default.createElement(e,f({},l))):o?i.default.createElement(e,f({},l)):null},n.prototype.render=function(){var e=this.props,t=e.children,o=e.wrapperClassName;return i.default.createElement("span",{className:o,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave},this.renderHoverContents(),t)},n}(r.Component);return n.displayName="WrappedHoverComponent",n.propTypes=t,n.defaultProps=o,n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var r=o(1),i=n(r),l=o(569),u=n(l),s=o(160),c=n(s),d=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),f=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++){t=arguments[o];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}},1568:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(1595);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(a).default}})},1569:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(1597);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(a).default}})},1570:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(1599);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(a).default}})},1571:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(1572);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(a).default}})},1572:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.FollowButton=void 0;var a=o(1),r=n(a),i=o(12),l=o(47),u=n(l),s=o(13),c=n(s),d=o(20);o(556),o(557),o(558);var f=o(55),p=n(f),h=o(24),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(h),y=o(53),_=o(63),v=n(_),b=o(31),g=n(b),P=o(1573),T=n(P),w=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),E=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++){t=arguments[o];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},I={selectedUser:a.PropTypes.object.isRequired,authUser:a.PropTypes.object,location:a.PropTypes.object,className:a.PropTypes.string,redirectAfterFollow:a.PropTypes.bool,trackFollowButtonClick:a.PropTypes.func.isRequired,trackUnfollowButtonClick:a.PropTypes.func.isRequired,followUser:a.PropTypes.func.isRequired,unfollowUser:a.PropTypes.func.isRequired,labelText:a.PropTypes.shape({isFollowing:a.PropTypes.string.isRequired,isNotFollowing:a.PropTypes.string.isRequired}),buttonType:a.PropTypes.string},C={labelText:{isFollowing:"Following",isNotFollowing:"Follow"}},S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return w(t,e),t.prototype.componentWillUnmount=function(){this.followSubscription&&this.followSubscription.unsubscribe()},t.prototype.getLabelText=function(){var e=this.props.labelText;return this.props.selectedUser.followed_by_user?e.isFollowing:e.isNotFollowing},t.prototype.buildToLink=function(){var e=this.props,t=e.authUser,o=e.location,n=t?o.query:Object.assign({},o.query,{login_view:"is_visible",login_action:"follow"});return{pathname:o.pathname,query:n,state:o.state}},t.prototype.buildClickHandler=function(){var e=this,t=this.props,o=t.authUser,n=t.selectedUser,a=t.followUser,r=t.unfollowUser,i=t.trackFollowButtonClick,l=t.trackUnfollowButtonClick,u=t.buttonType;if(!o)return function(){return i(n.id,u)};var s=n.username,c=n.followed_by_user,f=c?p.default.custom.unfollowUser:p.default.custom.followUser,h=d.Observable.defer(function(){return f(s)}).retry(3).take(1);return function(t){t.stopPropagation(),c?(r(n.id),l(n.id,u)):(a(n.id),i(n.id,u)),e.followSubscription=h.subscribe()}},t.prototype.renderContainer=function(e){var t=this.props,o=t.selectedUser,n=t.className,a=t.redirectAfterFollow,i=t.authUser,l=this.buildClickHandler(),u=o.followed_by_user,s=!i,d=a||s,f={className:(0,c.default)(T.default.followButton,u&&T.default.isFollowing,n),buttonSize:"small"};return d?r.default.createElement(v.default,E({tag:"link",to:this.buildToLink(),onMouseUp:l},f),e):r.default.createElement(v.default,E({tag:"button",onMouseUp:l},f),e)},t.prototype.render=function(){var e=this.props,t=e.selectedUser,o=e.authUser;return(0,u.default)(o,"username")===t.username?r.default.createElement("div",null):this.renderContainer(r.default.createElement("span",null,r.default.createElement(g.default,{type:"follow",className:T.default.followIcon}),this.getLabelText()))},t}(a.Component);t.FollowButton=S,S.displayName="FollowButton",S.propTypes=I,S.defaultProps=C;var O=function(e){return{authUser:(0,y.getAuthUser)(e)}},k={trackFollowButtonClick:m.trackFollowButtonClick,trackUnfollowButtonClick:m.trackUnfollowButtonClick,followUser:m.followUser,unfollowUser:m.unfollowUser};t.default=(0,i.connect)(O,k)(S)},1573:function(e,t){e.exports={colorWhite:"#fff",colorLightGrey:"#ddd",colorGrey:"#999",colorDarkGrey:"#777",colorBlue:"#007fff",colorDarkBlue:"#006aff",colorBlack:"#000",followButton:"_3nDcb",isFollowing:"_2br-F",followIcon:"_2BKrY"}},1578:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SEARCH_DELAY=600,t.SEARCH_TRACKING_DELAY=2500,t.CARD_HOVER_DELAY=500},1579:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(1580);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(a).default}})},1580:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.UserResultCard=void 0;var a=o(1),r=n(a),i=o(12),l=o(13),u=n(l),s=o(47),c=n(s),d=o(54),f=n(d),p=o(86),h=o(53),m=o(23),y=o(39),_=o(14),v=o(69),b=o(1571),g=n(b),P=o(1581),T=n(P),w=o(1584),E=n(w),I={children:a.PropTypes.element,user:a.PropTypes.object.isRequired,photos:a.PropTypes.array,authUser:a.PropTypes.object,withinContainer:a.PropTypes.bool,withFollowButton:a.PropTypes.bool,pixelRatio:a.PropTypes.number.isRequired},C=t.UserResultCard=function(e){var t=e.user,o=e.pixelRatio,n=e.photos,a=e.authUser,i=e.withinContainer,l=e.withFollowButton,s=e.children,d=!!t.total_photos,p=d&&(0,v.range)(3).map(function(e){return r.default.createElement(T.default,{key:e,photo:(0,c.default)(n,e)})}),h=l&&a&&a.id!==t.id,_=(0,m.getAvatarUrlFromApiUser)({user:t,pixelRatio:o,size:"medium"});return r.default.createElement("div",{className:(0,u.default)(E.default.cardLink,i&&E.default.withinContainer)},r.default.createElement(f.default,{className:E.default.container,to:{pathname:(0,y.buildUserUrl)(t)},onClick:function(){return window.scrollTo(0,0)}},r.default.createElement("div",{className:E.default.topContainer},r.default.createElement("div",{className:E.default.userAvatarContainer},r.default.createElement("img",{className:E.default.userAvatarImage,src:_,role:"presentation"})),r.default.createElement("div",{className:E.default.userInfoContainer},r.default.createElement("h1",{className:E.default.userName},t.name),r.default.createElement("p",{className:E.default.userHandle},"@"+t.username))),d&&r.default.createElement("div",{className:E.default.bottomContainer},p)),h&&r.default.createElement("div",{className:E.default.followButtonContainer},r.default.createElement(g.default,{selectedUser:t,className:E.default.followButton})),s)};C.displayName="UserResultCard",C.propTypes=I;var S=function(e,t){return{authUser:(0,h.getAuthUser)(e),photos:(0,v.pickValues)((0,_.getPhotosById)(e),t.user.photoIds)||t.user.photos,pixelRatio:(0,p.getPixelRatio)(e)}};t.default=(0,i.connect)(S)(C)},1581:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(1582);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(a).default}})},1582:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(1),r=n(a),i=o(47),l=n(i),u=o(13),s=n(u),c=o(23),d=o(1583),f=n(d),p={photo:a.PropTypes.object,darker:a.PropTypes.bool.isRequired},h={darker:!1},m=function(e){var t=e.photo,o=e.darker,n=(0,l.default)(t,"urls.thumb"),a=(0,l.default)(t,"color");return r.default.createElement("div",{className:(0,s.default)(f.default.photoThumbContainer,o?f.default.photoThumbContainerDark:f.default.photoThumbContainerLight),style:t&&{backgroundColor:a}},r.default.createElement("div",{className:f.default.photoThumb,style:t&&{backgroundImage:(0,c.urlToBackgroundImage)(n)}}))};m.propTypes=p,m.defaultProps=h,t.default=m},1583:function(e,t){e.exports={colors:'"styles/Colors.css"',colorDarkWhite:"#f5f5f5",colorLightGrey:"#ddd",photoThumbContainer:"_1BiZr",photoThumbContainerLight:"_1QflV",photoThumbContainerDark:"_3mBAu",photoThumb:"_2te-4"}},1584:function(e,t){e.exports={clearfix:"_2TNYr","sm-col":"_6_Gu-","sm-col-6":"_2cVF0","md-col-4":"_1hITE",px2:"_2DKvn",floatLeft:"_2T3hc","--sm-min":"(--sm-min)",colorDarkWhite:"#f5f5f5",colorLightGrey:"#ddd",colorGrey:"#999",colorLightBlack:"#111",truncate:"_1ByhS",textDecorationNone:"_1CBrG",grid:"_15FGY _6_Gu- _2cVF0 _1hITE _2DKvn",cardLink:"_3x_oL",withinContainer:"_3eFB8",container:"_2Twi2 _1CBrG",topContainer:"_2Em44 _2TNYr",userAvatarContainer:"_6jh8j _2T3hc",userAvatarImage:"_2i14t",userInfoContainer:"_3_xrB",userName:"_2_qf1 _1ByhS",userHandle:"_1l0oJ _1ByhS",userStats:"_3riLm _2TNYr",userStat:"_181r1 _1CBrG",statNumber:"_3FamA",statDesc:"_1Nvo9",bottomContainer:"_1dc02",photoThumbContainer:"_3fKeO",photoThumb:"_3XTKp",followButtonContainer:"_3u1LW",followButton:"_1TZOC"}},1585:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(1588);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(a).default}})},1586:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.reportPhotoImpressions=void 0;var a=o(1),r=n(a),i=o(12),l=o(1612),u=n(l),s=o(88),c=n(s),d=o(23),f=o(24),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(f),h=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),m=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++){t=arguments[o];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},y=!0===c.default.get("ENABLE_PHOTO_IMPRESSIONS_TRACKING");t.reportPhotoImpressions=function(e){var t={photo:a.PropTypes.object.isRequired,position:a.PropTypes.number.isRequired,reportPhotoImpression:a.PropTypes.func.isRequired},o=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return h(o,t),o.prototype.reportImpression=function(e){if(e){var t=this.props,o=t.photo,n=t.position;(0,t.reportPhotoImpression)({photo:{id:o.id,position:n}})}},o.prototype.render=function(){var t=r.default.createElement(e,m({},this.props));return y&&d.isBrowser&&(0,d.checkSupportsIntersectionObservers)()?r.default.createElement(u.default,{onChange:this.reportImpression.bind(this),threshold:.5},t):t},o}(a.Component);o.displayName="WrappedReportPhotoImpressionsComponent",o.propTypes=t;var n={reportPhotoImpression:p.reportPhotoImpression};return(0,i.connect)(null,n)(o)}},1587:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(1),r=n(a),i=o(13),l=n(i),u=o(54),s=n(u),c=o(39),d=o(1567),f=n(d),p=o(1578),h=o(568),m=n(h),y=o(1585),_=n(y),v=o(1590),b=n(v),g={user:a.PropTypes.object.isRequired,type:a.PropTypes.oneOf(["default","alt","emphasiseUsername"]),secondaryLink:a.PropTypes.shape({label:a.PropTypes.string.isRequired,href:a.PropTypes.string.isRequired}),includeAvatar:a.PropTypes.bool,inline:a.PropTypes.bool,isInFollowingFeed:a.PropTypes.bool,children:a.PropTypes.node},P={type:"default",includeAvatar:!1},T=(0,f.default)(_.default),w=function(e){var t=e.user,o=e.type,n=e.secondaryLink,a=e.children,i=e.includeAvatar,u=e.inline,d=e.isInFollowingFeed,f=function(){switch(o){case"alt":return[b.default.alt];case"emphasiseUsername":return[b.default.mainLinkEmphasiseUsernameType,b.default.linkEmphasiseUsernameType]}}(),h=function(){switch(o){case"alt":return b.default.alt;case"emphasiseUsername":return b.default.linkEmphasiseUsernameType}}();return r.default.createElement("span",{className:b.default.container},i&&r.default.createElement(T,{user:t,delay:p.CARD_HOVER_DELAY,wrapperClassName:b.default.avatarContainer},r.default.createElement(m.default,{user:t})),r.default.createElement("div",{className:(0,l.default)(b.default.linkContainer,u&&b.default.inlineContainer,d&&b.default.feedContainer)},r.default.createElement(T,{user:t,delay:p.CARD_HOVER_DELAY},r.default.createElement(s.default,{to:{pathname:(0,c.buildUserUrl)(t)},className:(0,l.default)(b.default.name,f,(y={},y[b.default.centerName]=!n,y[b.default.inlineLink]=u,y))},a||t.name),n?r.default.createElement("a",{href:n.href,className:(0,l.default)(b.default.name,h,(_={},_[b.default.secondaryLink]=n,_))},n.label):null)));var y,_};w.propTypes=g,w.defaultProps=P,t.default=w},1588:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(1),r=n(a),i=o(12),l=o(55),u=n(l),s=o(108),c=o(24),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(c),f=o(53),p=o(23),h=o(560),m=n(h),y=o(1579),_=n(y),v=o(1589),b=n(v),g=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),P={user:a.PropTypes.object.isRequired,authUser:a.PropTypes.object,updateData:a.PropTypes.func.isRequired},T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return g(t,e),t.prototype.render=function(){var e=this.props,t=e.user,o=e.updateData,n=e.authUser;return(0,p.checkUserIsEnhanced)({user:t,authUser:n})?r.default.createElement(m.default,{className:b.default.cardTooltip},r.default.createElement(_.default,{withinContainer:!0,withFollowButton:!0,user:t,actions:d})):(u.default.users.profile(t.username).then(l.toJson).then((0,s.normalizeResponse)("user")).then(function(e){var t=e.entities;o(t)}),null)},t}(a.Component);T.displayName="UserDetailsCard",T.propTypes=P;var w=function(e){return{authUser:(0,f.getAuthUser)(e)}};t.default=(0,i.connect)(w,{updateData:d.updateData})(T)},1589:function(e,t){e.exports={cardTooltip:"wVee7"}},1590:function(e,t){e.exports={hoverTransition:"_3XJBh",colorWhite:"#fff",truncate:"_1ByhS",textDecorationNone:"_1CBrG",container:"_2aPXR",avatarContainer:"JRtMq",userAvatar:"RIxWs",linkContainer:"_80uCh",name:"_3XzpS _1ByhS",centerName:"_2zITg",secondaryLink:"NRFpG _1ByhS",alt:"_1_w0v _3XJBh _1CBrG",mainLinkEmphasiseUsernameType:"_1O9Y0",linkEmphasiseUsernameType:"_3l__V _1CBrG",inlineContainer:"_3qohC",inlineLink:"_1ZT8D",feedContainer:"_3n7HL"}},1591:function(e,t,o){"use strict";function n(e){var t=e.downloadButtonXp,o=e.inFollowingFeed;return[i.VARIANTS.showArrow,i.VARIANTS.showBottomBar].includes(t)&&!o}function a(e){var t=u.safeLocalStorageHelpers.hasItem(l.HAS_DOWNLOADED_A_PHOTO),o=e.downloadButtonXp===i.VARIANTS.showArrow;return n(e)&&o&&!t}function r(e){var t=e.downloadButtonXp,o=e.inFollowingFeed;return t===i.VARIANTS.showWord&&!o}Object.defineProperty(t,"__esModule",{value:!0}),t.checkHasWorkingHover=t.ActionsModes=t.ActionsStates=void 0,t.checkShouldShowDownloadButton=n,t.checkShouldShowTooltip=a,t.checkShouldShowLabel=r;var i=o(559),l=o(1565),u=o(23),s=t.ActionsStates=void 0;!function(e){e.All="All",e.AddToCollectionButton="AddToCollectionButton",e.AddToCollectionButtonAndPhotographerInfo="AddToCollectionButtonAndPhotographerInfo",e.DownloadButton="DownloadButton"}(t.ActionsStates=s=s||(t.ActionsStates=s={}));var c=t.ActionsModes=void 0;!function(e){e.All="All",e.CollectionsOnboarding="CollectionsOnboarding"}(t.ActionsModes=c=c||(t.ActionsModes=c={}));var d=function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream};t.checkHasWorkingHover=function(){return!d()}},1593:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(1594);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(a).default}})},1594:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SmallPhoto=void 0;var a=o(1),r=n(a),i=o(12),l=o(13),u=n(l),s=o(54),c=n(s),d=o(161),f=n(d),p=o(23),h=o(213),m=o(39),y=o(315),_=o(107),v=o(158),b=o(1566),g=n(b),P=o(1568),T=n(P),w=o(1569),E=n(w),I=o(1570),C=n(I),S=o(1602),O=n(S),k=o(1591),M=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),R={inFollowingFeed:!1,shouldIncludeLink:!0,actionsMode:k.ActionsModes.All},D=function(e){function t(t){var o=e.call(this,t)||this;return o.handleMouseMove=o.handleMouseMove.bind(o),o.handleMouseLeave=o.handleMouseLeave.bind(o),o.state={isHovering:!1},o}return M(t,e),t.prototype.getActionsState=function(){var e=this.state.isHovering,t=this.props,o=t.actionsMode,n=t.jsLoaded,a=t.downloadButtonXp,r=t.inFollowingFeed,i=(0,k.checkShouldShowDownloadButton)({downloadButtonXp:a,inFollowingFeed:r});switch(o){case k.ActionsModes.CollectionsOnboarding:return e||!n?k.ActionsStates.AddToCollectionButtonAndPhotographerInfo:k.ActionsStates.AddToCollectionButton;case k.ActionsModes.All:return e||!n?k.ActionsStates.All:i&&!e?k.ActionsStates.DownloadButton:void 0}},t.prototype.handleMouseMove=function(){(0,k.checkHasWorkingHover)()&&!this.state.isHovering&&this.setState({isHovering:!0})},t.prototype.handleMouseLeave=function(){this.setState({isHovering:!1})},t.prototype.renderPhotoInfo=function(){var e=this.props,t=e.photo,o=e.linkTo,n=e.windowWidth,a=e.location,i=e.imageUrl,l=e.showPhotoInfoOnHover,s=e.shouldIncludeLink,d=!(0,h.checkIsPhone)(n);return r.default.createElement("div",{className:(0,u.default)(O.default.photoInfo,void 0!==this.getActionsState()&&O.default.photoInfoIsShown),onMouseMove:d&&this.handleMouseMove,onMouseLeave:d&&this.handleMouseLeave},s&&r.default.createElement(c.default,{title:"View the photo by "+t.user.name,to:o||(0,m.buildPhotoLink)(t,a,n,{initialSrc:i}),className:O.default.photoInfoLink}),l&&this.renderActions())},t.prototype.renderLikeButton=function(){var e=this.props,t=e.location,o=e.photo;return r.default.createElement(T.default,{type:"alt",location:t,photo:o})},t.prototype.renderAddToCollectionButton=function(){var e=this.props,t=e.location,o=e.photo;return r.default.createElement("div",{className:O.default.addToCollectionButtonContainer},r.default.createElement(C.default,{className:O.default.collectionButton,type:"alt",photo:o,location:t}))},t.prototype.renderDownloadButton=function(){var e=this.props,t=e.photo,o=e.downloadButtonXp,n=e.inFollowingFeed,a=(0,k.checkShouldShowTooltip)({downloadButtonXp:o,inFollowingFeed:n}),i=(0,k.checkShouldShowLabel)({downloadButtonXp:o,inFollowingFeed:n});return r.default.createElement("div",{className:O.default.buttonDownloadContainer},r.default.createElement(E.default,{type:"alt",photo:t,showLabel:i,showTooltip:a}))},t.prototype.renderUserLink=function(){var e=this.props.photo.user;return r.default.createElement("div",{className:O.default.userContainer},r.default.createElement(g.default,{includeAvatar:!0,user:e,type:"alt"}))},t.prototype.renderTopActions=function(){switch(this.getActionsState()){case k.ActionsStates.AddToCollectionButton:case k.ActionsStates.AddToCollectionButtonAndPhotographerInfo:return r.default.createElement("div",{className:O.default.actionsTop},this.renderAddToCollectionButton());case k.ActionsStates.All:return r.default.createElement("div",{className:O.default.actionsTop},this.renderLikeButton(),this.renderAddToCollectionButton());case k.ActionsStates.DownloadButton:case void 0:return}},t.prototype.renderBottomActions=function(){switch(this.getActionsState()){case k.ActionsStates.All:return r.default.createElement("div",{className:O.default.actionsBottom},this.renderUserLink(),this.renderDownloadButton());case k.ActionsStates.AddToCollectionButtonAndPhotographerInfo:return r.default.createElement("div",{className:O.default.actionsBottom},this.renderUserLink());case k.ActionsStates.DownloadButton:return r.default.createElement("div",{className:O.default.actionsBottom},this.renderDownloadButton());case k.ActionsStates.AddToCollectionButton:case void 0:return}},t.prototype.renderActions=function(){return void 0!==this.getActionsState()?r.default.createElement("div",null,this.renderTopActions(),this.renderBottomActions()):null},t.prototype.renderImage=function(){var e=this,t=this.props,o=t.photo,n=t.width,a=t.height,i=t.imageUrl,l=t.fillWidth,s=t.children,c=t.followingFeedClassName,d=t.inFollowingFeed,h=t.photoRef,m={backgroundImage:(0,p.urlToBackgroundImage)(i),backgroundColor:o.color,backgroundSize:"cover",width:l?"100%":n,height:a};return r.default.createElement("div",{style:d?m:{},className:(0,u.default)(d&&(0,u.default)(O.default.photo,c))},!d&&r.default.createElement("img",{alt:o.description||null,src:i,ref:function(t){(0,f.default)(h)&&h(t),e.linkElem=t},className:O.default.imgPhoto,style:{width:l?"100%":n,height:a}}),s)},t.prototype.render=function(){var e=this.props.containerClassName;return r.default.createElement("div",{className:(0,u.default)(O.default.container,e)},this.renderImage(),this.renderPhotoInfo())},t.displayName="SmallPhoto",t.defaultProps=R,t}(a.PureComponent);t.SmallPhoto=D;var N=function(e,t){return{jsLoaded:(0,y.getJsLoaded)(e),windowWidth:(0,_.getWindowWidth)(e),downloadButtonXp:(0,v.getDownloadButtonXp)(e)}};t.default=(0,i.connect)(N)(D)},1595:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.LikeButton=void 0;var a=o(1),r=n(a),i=o(12),l=o(13),u=n(l),s=o(53),c=o(24),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(c),f=o(20);o(556),o(557),o(558);var p=o(55),h=n(p),m=o(63),y=n(m),_=o(31),v=n(_),b=o(1596),g=n(b),P=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),T={type:a.PropTypes.oneOf(["default","alt"]),photo:a.PropTypes.object.isRequired,location:a.PropTypes.object.isRequired,className:a.PropTypes.string,authUser:a.PropTypes.object,trackPhotoUnlike:a.PropTypes.func.isRequired,trackPhotoLike:a.PropTypes.func.isRequired,unlikePhoto:a.PropTypes.func.isRequired,likePhoto:a.PropTypes.func.isRequired,setSelectedPhoto:a.PropTypes.func.isRequired},w={type:"default"},E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return P(t,e),t.prototype.componentWillUnmount=function(){this.likesSubscription&&this.likesSubscription.unsubscribe()},t.prototype.buildToLink=function(){var e=this.props,t=e.authUser,o=e.location,n=e.photo;return t?{pathname:o.pathname,query:o.query,state:o.state}:{pathname:o.pathname,query:Object.assign({},o.query,{login_view:"is_visible",login_action:"like",login_from_photo:n.id}),state:o.state}},t.prototype.isLikedModifier=function(){var e=this.props,t=e.photo,o=e.type,n="default"===o?"outline":"outline-alt";return t.liked_by_user?"pink":n},t.prototype.buildClickHandler=function(){var e=this,t=this.props,o=t.photo,n=t.trackPhotoUnlike,a=t.trackPhotoLike,r=t.unlikePhoto,i=t.likePhoto,l=o.liked_by_user,u=l?h.default.photos.unlikePhoto:h.default.photos.likePhoto,s=l?n:a,c=l?r:i,d=f.Observable.defer(function(){return u(o.id)}).retry(3);return function(t){t.preventDefault(),c(o.id),s(o),e.likesSubscription=d.subscribe()}},t.prototype.renderLikesLabel=function(){var e=this.props.photo;return e.likes?r.default.createElement("span",{className:g.default.labelLike},e.likes):r.default.createElement("span",null)},t.prototype.render=function(){var e=this.props,t=e.photo,o=e.setSelectedPhoto,n=e.trackPhotoLike,a=e.className,i=e.authUser,l=i?this.buildClickHandler():function(){o({id:t.id}),n(t)};return r.default.createElement(y.default,{className:(0,u.default)(g.default.buttonLike,a),buttonType:this.isLikedModifier(),tag:"link",title:"Like photo",buttonSize:"small",to:this.buildToLink(),onClick:l},r.default.createElement("span",null,r.default.createElement(v.default,{type:"heart",className:(0,u.default)(g.default.likeIcon,(s={},s[g.default.likeIconLiked]=t.liked_by_user,s))}),this.renderLikesLabel()));var s},t}(a.Component);t.LikeButton=E,E.displayName="LikeButton",E.propTypes=T,E.defaultProps=w;var I=function(e){return{authUser:(0,s.getAuthUser)(e)}},C={trackPhotoUnlike:d.trackPhotoUnlike,trackPhotoLike:d.trackPhotoLike,unlikePhoto:d.unlikePhoto,likePhoto:d.likePhoto,setSelectedPhoto:d.setSelectedPhoto};t.default=(0,i.connect)(I,C)(E)},1596:function(e,t){e.exports={floatLeft:"_2T3hc",colorPink:"#f15151",colorWhite:"#fff",likeIcon:"BWSrD _2T3hc",likeIconLiked:"_1O_YD",labelLike:"_2ER2Y _2T3hc"}},1597:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.DownloadButton=void 0;var a=o(1),r=n(a),i=o(12),l=o(13),u=n(l),s=o(24),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(s),d=o(314),f=o(1565),p=o(23),h=o(1567),m=n(h),y=o(63),_=n(y),v=o(31),b=n(v),g=o(560),P=n(g),T=o(1598),w=n(T),E={photo:a.PropTypes.object.isRequired,type:a.PropTypes.oneOf(["default","alt","green"]),showLabel:a.PropTypes.bool,showTooltip:a.PropTypes.bool,className:a.PropTypes.string,trackPhotoDownloadButtonClick:a.PropTypes.func.isRequired,showFixedBottomCard:a.PropTypes.func.isRequired,hideDownloadBottomBar:a.PropTypes.func.isRequired,label:a.PropTypes.string},I={type:"default",label:"Download"},C=t.DownloadButton=function(e){var t=e.photo,o=e.trackPhotoDownloadButtonClick,n=e.type,a=e.showLabel,i=e.showTooltip,l=e.className,s=e.showFixedBottomCard,c=e.hideDownloadBottomBar,h=e.label,y=function(){o(t),c(),p.safeLocalStorage.setItem(f.HAS_DOWNLOADED_A_PHOTO,""+!0);var e=new d.SayThanksCard(t.id);s(e)},v=a&&r.default.createElement("span",{className:w.default.label},h),g=r.default.createElement(b.default,{type:"download",className:(0,u.default)(w.default.downloadIcon,(C={},C[w.default.labelIcon]=a,C))}),T=function(){return r.default.createElement(P.default,{className:w.default.tooltip,tipPositionClassName:w.default.tooltipAnchorRight},r.default.createElement("div",{className:w.default.tooltipContents},"Click the â†“ to download this photo for free."))},E=(0,m.default)(T),I=function(){switch(n){case"default":return"outline";case"alt":return"outline-alt";case"green":return"green"}}();return r.default.createElement(_.default,{className:(0,u.default)(w.default.button,l),buttonType:I,buttonSize:"small",title:"Download photo",href:t.links.download+"?force=true",rel:"nofollow",download:!0,target:"_blank",track:y},r.default.createElement("span",null,i?r.default.createElement(E,null,g):g,v));var C};C.propTypes=E,C.defaultProps=I,C.displayName="DownloadButton";var S={trackPhotoDownloadButtonClick:c.trackPhotoDownloadButtonClick,showFixedBottomCard:c.showFixedBottomCard,hideDownloadBottomBar:c.hideDownloadBottomBar};t.default=(0,i.connect)(null,S)(C)},1598:function(e,t){e.exports={"--sm-min":"(--sm-min)",colorWhite:"#fff",colorLightBlack:"#111",button:"_1Tfeo",icon:"_11dQc",downloadIcon:"Apljk _11dQc",labelIcon:"_1Jd5C",label:"_2Aga-",tooltip:"_2wyvF",tooltipAnchorRight:"GMco6",tooltipContents:"_31KQ1"}},1599:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.AddToCollectionButton=void 0;var a=o(1),r=n(a),i=o(12),l=o(13),u=n(l),s=o(24),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(s),d=o(53),f=o(63),p=n(f),h=o(31),m=n(h),y=o(1600),_=o(1601),v=n(_),b={type:a.PropTypes.oneOf(["default","alt"]),photo:a.PropTypes.object.isRequired,setSelectedPhoto:a.PropTypes.func.isRequired,trackCollectionButtonClick:a.PropTypes.func.isRequired,location:a.PropTypes.object.isRequired,className:a.PropTypes.string,authUser:a.PropTypes.object,handleClick:a.PropTypes.func,children:a.PropTypes.node},g={type:"default"},P=t.AddToCollectionButton=function(e){var t=e.photo,o=e.setSelectedPhoto,n=e.trackCollectionButtonClick,a=e.location,i=e.type,l=e.className,s=e.authUser,c=e.handleClick,d=e.children,f="default"===i?"outline":"outline-alt";return r.default.createElement(p.default,{className:(0,u.default)(v.default.buttonCollections,l),buttonType:(0,y.inCollectionModifier)(f,t),buttonSize:"small",tag:"link",title:"Add to collection",to:(0,y.buildToLink)(s,a,t),onClick:function(){o({id:t.id}),n(t.id),c&&c()}},r.default.createElement(m.default,{type:"plus",className:v.default.addIcon}),r.default.createElement("span",{className:v.default.label},d,"Collect"))};P.displayName="AddToCollectionButton",P.propTypes=b,P.defaultProps=g;var T=function(e){return{authUser:(0,d.getAuthUser)(e)}},w={setSelectedPhoto:c.setSelectedPhoto,trackCollectionButtonClick:c.trackCollectionButtonClick};t.default=(0,i.connect)(T,w)(P)},1600:function(e,t,o){"use strict";function n(e,t,o){var n=e?Object.assign({},t.query,{add_to_collection_view:"is_visible"}):Object.assign({},t.query,{login_view:"is_visible",login_action:"add_to_collection",login_from_photo:o.id});return{pathname:t.pathname,query:n,state:t.state}}function a(e,t){return t.current_user_collections&&t.current_user_collections.length>0?"green":e}Object.defineProperty(t,"__esModule",{value:!0}),t.buildToLink=n,t.inCollectionModifier=a},1601:function(e,t){e.exports={floatLeft:"_2T3hc","--sm-min":"(--sm-min)",addIcon:"_2rdbO _2T3hc",label:"_1eyJo"}},1602:function(e,t){e.exports={floatLeft:"_2T3hc",floatRight:"_3pmDG","--sm-min":"(--sm-min)",colorPink:"#f15151",colorLightGrey:"#ddd",hoverTransition:"_3XJBh",container:"_3vgBX",photo:"_1hz5D",imgPhoto:"KW7g_ _1hz5D",photoInfo:"bQJ8Z",photoInfoIsShown:"_2j4gG",photoInfoLink:"_23lr1",actionsTop:"_2yfpM",actionsBottom:"_1a5YS",userContainer:"CpQi5 _2T3hc",buttonDownloadContainer:"_3i-Ef _3pmDG",addToCollectionButtonContainer:"_3W6mQ"}},1608:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(1609);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(a).default}})},1609:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return void 0===e&&(e=0),void 0===t&&(t=[]),{totalHeight:e,photos:t}}function r(e){var t=0,o=e[0];return e.forEach(function(e,n){e.totalHeight<o.totalHeight&&(t=n,o=e)}),t}function i(e){return Array.from({length:e}).map(function(){return a()})}Object.defineProperty(t,"__esModule",{value:!0}),t.Masonry=void 0;var l=o(1),u=n(l),s=o(12),c=o(13),d=n(c),f=o(24),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(f),h=o(107),m=o(158),y=o(559),_=o(213),v=o(1610),b=n(v),g=o(1616),P=o(1617),T=n(P),w=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),E={photos:l.PropTypes.array.isRequired,location:l.PropTypes.object.isRequired,smallPhotoProps:l.PropTypes.object,windowWidth:l.PropTypes.number,downloadButtonXp:l.PropTypes.oneOf(Object.keys(y.VARIANTS)),showDownloadBottomBar:l.PropTypes.func.isRequired,hideDownloadBottomBar:l.PropTypes.func.isRequired,shouldUseContainerPadding:l.PropTypes.bool},I={shouldUseContainerPadding:!0},C=function(e){function t(t){var o=e.call(this,t)||this;return o.state={gridCount:(0,_.checkIsPhoneOrTablet)(t.windowWidth)?2:3},o.renderGrid=o.renderGrid.bind(o),o}return w(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.downloadButtonXp,o=e.showDownloadBottomBar;(0,g.checkShouldShowDownloadBottomBar)(t)&&o()},t.prototype.componentWillUpdate=function(e){var t=this.props.windowWidth;e.windowWidth!==t&&((0,_.checkIsPhoneOrTablet)(e.windowWidth)?this.setState({gridCount:2}):this.setState({gridCount:3}))},t.prototype.componentWillUnmount=function(){this.props.hideDownloadBottomBar()},t.prototype.getGridData=function(e){var t=this.props.photos,o=i(e);return t.forEach(function(e){var t=o[r(o)];e.height&&e.width&&(t.totalHeight+=e.height/e.width,t.photos.push(e))}),o.map(function(e){return e.photos})},t.prototype.renderGrid=function(e,t){var o=this.props,n=o.location,a=o.photos,r=o.smallPhotoProps,i=this.state.gridCount;return u.default.createElement("div",{key:t,ref:"MasonryGrid"+t,className:(0,d.default)(T.default.Grid,3===i&&T.default.GridThree,2===i&&T.default.GridTwo,1===i&&T.default.GridOne)},e.map(function(e,t){var o=a.indexOf(e);return u.default.createElement(b.default,{smallPhotoProps:r,gridCount:i,photo:e,position:o,key:t,location:n})}))},t.prototype.render=function(){var e=this.state.gridCount,t=this.props.shouldUseContainerPadding,o=this.getGridData(e).map(this.renderGrid);return u.default.createElement("div",{id:"gridMulti",className:(0,d.default)(T.default.container,t&&T.default.containerWithPadding),"data-test":g.TEST_ATTRIBUTE},o)},t}(l.Component);t.Masonry=C,C.displayName="Masonry",C.propTypes=E,C.defaultProps=I;var S=function(e){return{windowWidth:(0,h.getWindowWidth)(e),downloadButtonXp:(0,m.getDownloadButtonXp)(e)}},O={showDownloadBottomBar:p.showDownloadBottomBar,hideDownloadBottomBar:p.hideDownloadBottomBar};t.default=(0,s.connect)(S,O)(C)},1610:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(1611);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(a).default}})},1611:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(1),r=n(a),i=o(12),l=o(86),u=o(562),s=o(69),c=o(1593),d=n(c),f=o(1586),p=o(1614),h=o(1615),m=n(h),y=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++){t=arguments[o];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},_={location:a.PropTypes.object.isRequired,smallPhotoProps:a.PropTypes.object,contentWidth:a.PropTypes.number,pixelRatio:a.PropTypes.number.isRequired,photo:a.PropTypes.object.isRequired,gridCount:a.PropTypes.number.isRequired},v=function(e){var t=e.smallPhotoProps,o=e.gridCount,n=e.location,a=e.contentWidth,i=e.pixelRatio,l=e.photo,u=Math.ceil(a/o-32),c=(0,s.getImageSizeAndImgixUrl)({photo:l,isMasonry:!0,parentWidth:u,pixelRatio:i}),f=c.imageUrl,h=c.imageWidth,_=c.imageHeight;return r.default.createElement("div",{className:m.default.photoContainer,"data-test":p.TEST_ATTRIBUTE},r.default.createElement(d.default,y({fillWidth:!0,showPhotoInfoOnHover:!0,width:h,height:_,imageUrl:f,photo:l,location:n},t)))};v.displayName="MasonryPhoto",v.propTypes=_;var b=function(e){return{contentWidth:(0,u.getContentWidth)(e),pixelRatio:(0,l.getPixelRatio)(e)}};t.default=(0,f.reportPhotoImpressions)((0,i.connect)(b)(v))},1612:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var o={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(o[n]=e[n]);return o}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),s=o(1),c=(n(s),o(109)),d=n(c),f=o(1613),p=function(e){return"function"==typeof e},h=function(e){function t(){var e,o,n,a;r(this,t);for(var l=arguments.length,u=Array(l),s=0;s<l;s++)u[s]=arguments[s];return o=n=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),n.state={inView:!1},n.node=null,n.handleNode=function(e){n.node&&(0,f.unobserve)(n.node),e&&(0,f.observe)(e,n.handleChange,n.props.threshold),n.node=e},n.handleChange=function(e){return n.setState({inView:e})},a=o,i(n,a)}return l(t,e),u(t,[{key:"componentWillUpdate",value:function(e,t){this.props.onChange&&t.inView!==this.state.inView&&(this.props.onChange(t.inView),t.inView&&e.unobserve)}},{key:"componentDidUpdate",value:function(e,t){t.inView!==this.state.inView&&this.state.inView&&this.props.triggerOnce&&((0,f.unobserve)(this.node),this.node=null)}},{key:"componentWillUnmount",value:function(){this.node&&((0,f.unobserve)(this.node),this.node=null)}},{key:"render",value:function(){var e=this.props,t=e.children,o=e.render,n=e.tag,r=(e.triggerOnce,e.threshold,a(e,["children","render","tag","triggerOnce","threshold"])),i=this.state.inView;return(0,s.createElement)(n,Object.assign({},r,{ref:this.handleNode}),i&&p(o)?o():null,p(t)?t(i):t)}}]),t}(s.Component);h.propTypes={tag:d.default.node,children:d.default.oneOfType([d.default.func,d.default.node]),triggerOnce:d.default.bool,threshold:d.default.number,onChange:d.default.func,render:d.default.func},h.defaultProps={tag:"div",threshold:0,triggerOnce:!1},t.default=h},1613:function(e,t,o){"use strict";function n(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e&&t){var n=l.get(o);n||(n=new IntersectionObserver(r,{threshold:o}),l.set(o,n)),i.set(e,{callback:t,visible:!1,threshold:o}),n.observe(e)}}function a(e){if(e){var t=i.get(e);if(t){i.delete(e);var o=l.get(t.threshold);o&&o.unobserve(e);var n=!1;i.forEach(function(e){e.threshold===t.threshold&&(n=!0)}),o&&!n&&(o.disconnect(),l.delete(t.threshold))}}}function r(e){e.forEach(function(e){if(i.has(e.target)){var t=e.isIntersecting,o=e.intersectionRatio,n=e.target,a=i.get(n),r=a.callback,l=a.visible,u=a.threshold,s=l?o>u:o>=u;void 0!==t&&(s=s&&t),i.set(n,{callback:r,visible:s,threshold:u}),r&&r(s)}})}Object.defineProperty(t,"__esModule",{value:!0}),t.observe=n,t.unobserve=a;var i=new Map,l=new Map;t.default={observe:n,unobserve:a}},1614:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TEST_ATTRIBUTE="photo-component"},1615:function(e,t){e.exports={photoContainer:"_1pn7R"}},1616:function(e,t,o){"use strict";function n(e){var t=a.safeLocalStorageHelpers.hasItem(r.HAS_DOWNLOADED_A_PHOTO);return e===i.VARIANTS.showBottomBar&&!t}Object.defineProperty(t,"__esModule",{value:!0}),t.TEST_ATTRIBUTE=void 0,t.checkShouldShowDownloadBottomBar=n;var a=o(23),r=o(1565),i=o(559);t.TEST_ATTRIBUTE="photos-grid-view"},1617:function(e,t){e.exports={floatLeft:"_2T3hc","--sm-min":"(--sm-min)",clearfix:"_2TNYr",container:"_3_WtK _2TNYr",containerWithPadding:"_1C-lZ",Grid:"_1OvAL _2T3hc",GridThree:"_27nWV",GridTwo:"_1eGVY",GridOne:"_3nHtz"}},1658:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.generateImgDensitySrcSetString=t.generateImgWidthSrcSetString=t.serializeSrcSet=void 0;var a=o(1659),r=n(a),i=o(1662),l=n(i),u=o(1663),s=n(u),c=o(215),d=o(162),f=o(29),p=o(572),h=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&(o[n[a]]=e[n[a]]);return o},m=function(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var n,a,r=o.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(o=r.return)&&o.call(r)}finally{if(a)throw a.error}}return i},y=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e},_=function(e){var t=e.lowerBound,o=e.upperBound,n=e.interval,a=Math.ceil(o),i=y((0,r.default)(Math.ceil(t),a,Math.ceil(n)),[a]),u=i.map(function(e){return 2*e}).filter(function(e){return e<a});return(0,s.default)((0,l.default)(y(i,u)))},v=function(e){return"density"in e},b=function(e){var t=e.baseUrl;return function(e){return{width:e,url:(0,d.buildImgixUrl)(t)({w:e})}}},g=function(e){return(0,f.catOptions)([c.Option.of(e.url),v(e)?c.Option.of(e.density).map(p.numberToDensity):c.Option.of(e.width).map(p.numberToWidth)]).join(" ")},P=t.serializeSrcSet=function(e){return e.map(g).join(", ")},T=(t.generateImgWidthSrcSetString=function(e){var t=e.baseUrl,o=h(e,["baseUrl"]),n=_(o),a=n.map(b({baseUrl:t}));return P(a)},(0,r.default)(1,5)),w=function(e){var t=e.baseUrl,o=e.width;return function(e){return{density:e,url:(0,d.buildImgixUrl)(t)({w:o,dpr:e})}}};t.generateImgDensitySrcSetString=function(e){var t=T.map(w(e));return P(t)}},1659:function(e,t,o){var n=o(1660),a=n();e.exports=a},1660:function(e,t,o){function n(e){return function(t,o,n){return n&&"number"!=typeof n&&r(t,o,n)&&(o=n=void 0),t=i(t),t=t===t?t:0,void 0===o?(o=t,t=0):o=i(o)||0,n=void 0===n?t<o?1:-1:i(n)||0,a(t,o,n,e)}}var a=o(1661),r=o(570),i=o(320);e.exports=n},1661:function(e,t){function o(e,t,o,r){for(var i=-1,l=a(n((t-e)/(o||1)),0),u=Array(l);l--;)u[r?l:++i]=e,e+=o;return u}var n=Math.ceil,a=Math.max;e.exports=o},1662:function(e,t,o){var n=o(132),a=o(586),r=o(570),i=o(133),l=i(function(e,t){if(null==e)return[];var o=t.length;return o>1&&r(e,t[0],t[1])?t=[]:o>2&&r(t[0],t[1],t[2])&&(t.length=1),a(e,n(t,1),[])});e.exports=l},1663:function(e,t,o){function n(e){return e&&e.length?a(e):[]}var a=o(1664);e.exports=n},1664:function(e,t,o){function n(e){return a(e)}var a=o(1665);e.exports=n},1665:function(e,t,o){function n(e,t){for(var o=0,n=e.length,r=e[0],i=t?t(r):r,l=i,u=0,s=[r];++o<n;)r=e[o],i=t?t(r):r,a(i,l)||(l=i,s[++u]=r);return s}var a=o(218);e.exports=n},1727:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(1730);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(a).default}})},1728:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(1731);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(a).default}})},1730:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Collection=void 0;var a=o(1),r=n(a),i=o(12),l=o(13),u=n(l),s=o(54),c=n(s),d=o(86),f=o(23),p=o(212),h=o(1566),m=n(h),y=o(31),_=n(y),v=o(1728),b=n(v),g=o(1732),P=n(g),T=o(1733),w={collection:a.PropTypes.object.isRequired,columns:a.PropTypes.number,hideCollector:a.PropTypes.bool,pixelRatio:a.PropTypes.number.isRequired,onClick:a.PropTypes.func},E={columns:1,hideCollector:!1,onClick:function(){}},I=t.Collection=function(e){var t,o=e.collection,n=e.hideCollector,a=e.columns,i=e.pixelRatio,l=e.onClick,s=o.user,d=o.cover_photo,h=o.private,y=(0,p.buildCollectionUrl)(o),v=(0,f.buildCollectionTitle)(o),g=(0,T.getCollectionWidth)(a),w=(0,T.buildCoverPhotoUrl)(d,g,i);1===a?t=T.TEST_ATTRIBUTES.FULL:2===a?t=T.TEST_ATTRIBUTES.HALF:3===a&&(t=T.TEST_ATTRIBUTES.THIRD);var E=w&&(0,f.urlToBackgroundImage)(w);return r.default.createElement("div",{"data-test":t,className:(0,u.default)(P.default.collectionContainer,1===a&&P.default.full,2===a&&P.default.half,3===a&&P.default.third),style:{backgroundImage:E}},r.default.createElement("div",{className:P.default.collectionImage}),r.default.createElement("div",{className:P.default.overlay},r.default.createElement(c.default,{className:P.default.collectionAnchor,to:{pathname:y},onClick:l},r.default.createElement("div",{className:P.default.topRow},r.default.createElement("h4",{className:(0,u.default)(P.default.photoCount,3===a&&P.default.photoCountThird)},r.default.createElement(b.default,{curated:o.curated,publishedAt:o.published_at,totalPhotos:o.total_photos}))),r.default.createElement("h2",{className:(0,u.default)(P.default.title,3===a&&P.default.titleThird,1===a&&P.default.titleFull)},h&&r.default.createElement(_.default,{type:"lock",className:P.default.isPrivate}),v)),n?null:r.default.createElement("div",{className:(0,u.default)(P.default.userLinkContainer,3===a&&P.default.userLinkContainerThird)},r.default.createElement(m.default,{inline:!0,includeAvatar:!0,user:s,type:"alt"}))))};I.propTypes=w,I.defaultProps=E;var C=function(e){return{pixelRatio:(0,d.getPixelRatio)(e)}};t.default=(0,i.connect)(C)(I)},1731:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(1),r=n(a),i=o(23),l=o(571),u=n(l),s={curated:a.PropTypes.bool.isRequired,publishedAt:a.PropTypes.string,totalPhotos:a.PropTypes.number},c=function(e){var t=e.curated,o=e.publishedAt,n=e.totalPhotos;return t?r.default.createElement("span",null,(0,i.formatDate)(new Date(o))):r.default.createElement("span",null,r.default.createElement(u.default,{number:n})," ",(0,i.pluralizePhoto)(n))};c.propTypes=s,t.default=c},1732:function(e,t){e.exports={"--sm":"(--sm)","--sm-min":"(--sm-min)","--md-min":"(--md-min)",floatLeft:"_2T3hc",floatRight:"_3pmDG",clearfix:"_2TNYr",colorWhite:"#fff",fontWeightNormal:"_27Bp2",fontWeightSemibold:"_13Ib2",textTransformUppercase:"_3dLF0",textDecorationNone:"_1CBrG",collectionContainer:"_3GJR0",full:"_3YbcI",half:"_1JFIz",third:"_1oP91",collectionImage:"_2-WIS",overlay:"_36bYd",userLinkContainer:"CkHYc",collectionAnchor:"_3Hy4V _1CBrG",title:"_3-lOK _13Ib2",titleFull:"_3muMa",titleThird:"kH7jt",topRow:"_3B29A _2TNYr",photoCount:"_29Z-j _2T3hc _27Bp2",photoCountThird:"_2R8Hz",isPrivate:"_2wttd"}},1733:function(e,t,o){"use strict";function n(e){switch(e){case 1:return 1176;case 2:return 576;case 3:return 376;default:return 576}}function a(e,t,o){return e?(0,r.buildMaxWidthImgixUrlDEPRECATED)({url:e.urls.raw,width:t,pixelRatio:o}):null}Object.defineProperty(t,"__esModule",{value:!0}),t.TEST_ATTRIBUTES=void 0,t.getCollectionWidth=n,t.buildCoverPhotoUrl=a;var r=o(23);t.TEST_ATTRIBUTES={FULL:"collection-columns",HALF:"collection-columns-half",THIRD:"collection-columns-third"}},1758:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.RelatedCollectionsType=void 0;!function(e){e.related="related",e.collected="collected"}(t.RelatedCollectionsType=n=n||(t.RelatedCollectionsType=n={}));t.checkPhotoEntityHasFullInfo=function(e){return"related_collections"in e},t.checkPhotoEntityHasBasicInfo=function(e){return"description"in e},t.checkPhotoEntityHasStats=function(e){return"stats"in e}},1759:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.VIEW_MORE_ARROW_LIMIT=3,t.MAXIMUM_TITLE_TAGS_COUNT=4,t.MAXIMUM_RELATED_SEARCHES_COUNT=12},1763:function(e,t,o){"use strict";var n=o(20),a=o(1788);n.Observable.prototype.catch=a._catch,n.Observable.prototype._catch=a._catch},1781:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.RemoteDataTypes=void 0;!function(e){e.NotAsked="NotAsked",e.Loading="Loading",e.Failure="Failure",e.Success="Success"}(t.RemoteDataTypes=n=n||(t.RemoteDataTypes=n={}));var a=function(){function e(){this.type=n.NotAsked}return e}();t.NotAsked=a;var r=function(){function e(){this.type=n.Loading}return e}();t.Loading=r;var i=function(){function e(e){this.value=e,this.type=n.Failure}return e}();t.Failure=i;var l=function(){function e(e){this.value=e,this.type=n.Success}return e}();t.Success=l},1785:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(1786);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(a).default}})},1786:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(1),r=n(a),i=o(13),l=n(i),u=o(576),s=n(u),c=o(579),d=n(c),f=o(1759),p=o(1787),h=n(p),m={headingCopy:"Related searches",keywords:[],showHeading:!1,hideOnMobile:!1},y=function(e){var t=e.showHeading,o=e.keywords,n=e.hideOnMobile,a=e.headingCopy,i=(0,s.default)(o,f.MAXIMUM_RELATED_SEARCHES_COUNT);return i.length<1?r.default.createElement("div",null):r.default.createElement("div",{className:(0,l.default)(h.default.container,(u={},u[h.default.hideOnMobile]=n,u))},t&&r.default.createElement("p",{className:h.default.heading},a),r.default.createElement("div",{className:h.default.tagsContainer},i.map(function(e){return r.default.createElement(d.default,{key:e.title,title:e.title,backgroundImage:e.url,size:c.TagSize.small,className:h.default.tagOverrides})})));var u};y.displayName="RelatedTags",y.defaultProps=m,t.default=y},1787:function(e,t){e.exports={"--sm-min":"(--sm-min)","--xs-max":"(--xs-max)",clearfix:"_2KLco",mxn2:"_3hepI",fontWeightNormal:"_27Bp2",container:"_3w_cF",heading:"_2azK- _27Bp2",hideOnMobile:"_1Co2N",tagsContainer:"_18n5E",tagOverrides:"qr8Tb"}},1788:function(e,t,o){"use strict";function n(e){var t=new l(e),o=this.lift(t);return t.caught=o}var a=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},r=o(223),i=o(224);t._catch=n;var l=function(){function e(e){this.selector=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.selector,this.caught))},e}(),u=function(e){function t(t,o,n){e.call(this,t),this.selector=o,this.caught=n}return a(t,e),t.prototype.error=function(t){if(!this.isStopped){var o=void 0;try{o=this.selector(t,this.caught)}catch(t){return void e.prototype.error.call(this,t)}this._unsubscribeAndRecycle(),this.add(i.subscribeToResult(this,o))}},t}(r.OuterSubscriber)},1789:function(e,t,o){"use strict";function n(e){return e.catch(function(e){if(l(e)||e instanceof a.AjaxResponse||e instanceof a.AjaxError){var t=e.xhr.response;null!==t&&(0,r.throwErrorsIfPresent)(t)}throw e})}Object.defineProperty(t,"__esModule",{value:!0}),t.checkIsAjaxNetworkError=t.checkIsMockAjaxResponse=t.IS_MOCK_AJAX_RESPONSE=void 0,t.throwErrorsInObservableIfPresent=n;var a=o(606);o(1763);var r=o(55),i=t.IS_MOCK_AJAX_RESPONSE="IS_MOCK_AJAX_RESPONSE",l=t.checkIsMockAjaxResponse=function(e){return i in e};t.checkIsAjaxNetworkError=function(e){return e instanceof a.AjaxError&&"ajax error 0"===e.message}},1801:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapPhotoIdsToPhotos=void 0;var n=o(1),a=function(e){return e&&e.__esModule?e:{default:e}}(n),r=o(12),i=o(327),l=o(588),u=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++){t=arguments[o];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e};t.mapPhotoIdsToPhotos=function(e){var t="MapPhotoIdsToPhotos("+(0,l.getDisplayName)(e)+")",o=function(t){var o=t.photos;return a.default.createElement(e,u({},t,{photos:o}))};o.displayName=t;var n=function(){var e=(0,i.makeGetDenormalizedPhotoByIds)();return function(t,o){return{photos:e(t,o.photoIds)}}};return(0,r.connect)(n)(o)}},1850:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(2182);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(a).default}})},1851:function(e,t,o){"use strict";t.__esModule=!0;var n=o(2198),a=function(e){return e&&e.__esModule?e:{default:e}}(n),r=function(e){return(0,a.default)("displayName",e)};t.default=r},1852:function(e,t,o){"use strict";t.__esModule=!0;var n=o(2199),a=function(e){return e&&e.__esModule?e:{default:e}}(n),r=function(e,t){return t+"("+(0,a.default)(e)+")"};t.default=r},1853:function(e,t){e.exports={outerHorizontalGutter:"17px",innerHorizontalGutter:"10px",cellPadding:"5px",container:"_307c3",actions:"_3-6v7",cell:"_2iWc-",buttonCell:"_27vvN _2iWc-",photographer:"HAAez _2iWc-",downloadButtonCell:"_13Q- _27vvN _2iWc-",downloadButton:"_1AA_u"}},1854:function(e,t){e.exports={fontWeightNormal:"_27Bp2",heading:"_2y38F _27Bp2"}},2174:function(e,t,o){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1),i=a(r),l=o(12),u=o(20);o(563),o(1763),o(2175);var s=o(24),c=n(s),d=o(1789),f=o(605),p=n(f),h=o(108),m=o(327),y=o(107),_=o(53),v=o(1758),b=o(1781),g=o(29),P=o(87),T=o(167),w=o(23),E=o(158),I=o(2180),C=a(I),S=o(2188),O=a(S),k=o(2193),M=o(2194),R=a(M),D=o(603),N=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),A=function(e){return(0,d.throwErrorsInObservableIfPresent)(p.getPhotoWithInfo({photoId:e}).map(function(e){return e.response}))},L=function(e){return(0,d.throwErrorsInObservableIfPresent)(p.getRelatedPhotos({photoId:e}).map(function(e){return e.response}))},B=function(e){return(0,d.throwErrorsInObservableIfPresent)(p.getPhotoStats({photoId:e}).map(function(e){return e.response}))},j=(0,h.normalizeResponse)("photo"),x=(0,h.normalizeResponse)("relatedPhotos"),U=function(e){return void 0!==e.currentSrc&&(0,w.isNonEmptyString)(e.currentSrc)?e.currentSrc:(0,w.isNonEmptyString)(e.src)?e.src:void 0},F=function(e){function t(){var t=e.call(this)||this;return t.onRequestToggleTruncatedDescription=function(){var e=t.props,o=e.location,n=e.newPhotosPageXp;t.context.router.replace((0,T.updatePhotosPageLocationState)({newPhotosPageXp:n,location:o},function(e){return{shouldTruncateDescription:!e.shouldTruncateDescription}}))},t.state=t.getInitialState(),t.onRequestMainImageToggleCollapsed=t.onRequestMainImageToggleCollapsed.bind(t),t.onMainImageLoad=t.onMainImageLoad.bind(t),t}return N(t,e),t.prototype.getInitialState=function(){return{photoFullInfoRemoteData:new b.NotAsked,relatedPhotoIdsRemoteData:new b.NotAsked,photoStatsRemoteData:new b.NotAsked,mainImageCurrentSrc:void 0}},t.prototype.componentWillMount=function(){var e=this.props.location;this.fetchThenCacheAndSet(),(0,D.checkIsPhotoInfoRoute)(e.pathname)&&this.fetchPhotoStatsThenCacheAndSet()},t.prototype.componentWillReceiveProps=function(e){var t=this.props,o=t.params,n=t.maybePhoto,a=e.maybePhoto,r=o.id,i=e.params.id,l=this.state,u=l.photoStatsRemoteData,s=l.photoFullInfoRemoteData;r!==i?this.reset():n!==a&&void 0!==a&&(s.type===b.RemoteDataTypes.Success&&(0,v.checkPhotoEntityHasFullInfo)(a)&&this.updatePhotoFullInfoRemoteData(new b.Success(a)),u.type===b.RemoteDataTypes.Success&&(0,v.checkPhotoEntityHasStats)(a)&&this.updatePhotoStatsRemoteData(new b.Success(a.stats)))},t.prototype.componentDidUpdate=function(e){var t=this.props,o=t.params,n=t.location;o.id!==e.params.id&&(this.cleanup(),this.fetchThenCacheAndSet());var a=(0,D.checkIsPhotoInfoRoute)(e.location.pathname),r=(0,D.checkIsPhotoInfoRoute)(n.pathname);!a&&r?this.fetchPhotoStatsThenCacheAndSet():a&&!r&&this.onInfoRouteLeave()},t.prototype.componentWillUnmount=function(){this.cleanup()},t.prototype.onRootRouteLeave=function(){void 0!==this.photoInfoSubscription&&this.photoInfoSubscription.unsubscribe(),void 0!==this.relatedPhotosSubscription&&this.relatedPhotosSubscription.unsubscribe()},t.prototype.onInfoRouteLeave=function(){void 0!==this.photoStatsSubscription&&this.photoStatsSubscription.unsubscribe()},t.prototype.cleanup=function(){this.onRootRouteLeave(),this.onInfoRouteLeave()},t.prototype.updatePhotoFullInfoRemoteData=function(e){this.setState({photoFullInfoRemoteData:e})},t.prototype.updateRelatedPhotoIdsRemoteData=function(e){this.setState({relatedPhotoIdsRemoteData:e})},t.prototype.updatePhotoStatsRemoteData=function(e){this.setState({photoStatsRemoteData:e})},t.prototype.reset=function(){this.setState(this.getInitialState())},t.prototype.fetchThenCacheAndSet=function(){var e=this,t=this.props,o=t.params,n=t.updateData,a=t.maybePhoto,r=t.setErrorFlash,i=o.id,l=this.context.router.replace;this.updatePhotoFullInfoRemoteData(new b.Loading);var s=A(i).map(function(e){return{normalizedResponse:j(e),remoteData:new b.Success(e)}}).catch(function(e){return u.Observable.of({normalizedResponse:void 0,remoteData:new b.Failure(e)})});this.photoInfoSubscription=s.subscribe(function(t){var o=t.normalizedResponse,i=t.remoteData;i.type===b.RemoteDataTypes.Failure&&((0,d.checkIsAjaxNetworkError)(i.value)?r({message:"There was a network error. Please check your internet connection."}):(r({message:"There was a server error. Please try again later."}),void 0===a&&(0,P.handleClientSideError)(l)(i.value))),void 0!==o&&n(o.entities),e.updatePhotoFullInfoRemoteData(i)}),this.updateRelatedPhotoIdsRemoteData(new b.Loading);var c=L(i).map(function(e){return{normalizedResponse:x(e),remoteData:new b.Success(e.results.map(function(e){return e.id}))}}).catch(function(e){return u.Observable.of({normalizedResponse:void 0,remoteData:new b.Failure(e)})});this.relatedPhotosSubscription=c.subscribe(function(t){var o=t.normalizedResponse,a=t.remoteData;void 0!==o&&n(o.entities),e.updateRelatedPhotoIdsRemoteData(a)})},t.prototype.fetchPhotoStatsThenCacheAndSet=function(){var e=this,t=this.props,o=t.params,n=t.updatePhotoStats,a=o.id;this.updatePhotoStatsRemoteData(new b.Loading);var r=B(a).map(function(e){return{response:e,remoteData:new b.Success(e)}}).catch(function(e){return u.Observable.of({response:void 0,remoteData:new b.Failure(e)})});this.photoStatsSubscription=r.subscribe(function(t){var o=t.response,r=t.remoteData;void 0!==o&&n(a,o),e.updatePhotoStatsRemoteData(r)})},t.prototype.onRequestMainImageToggleCollapsed=function(){this.trackToggleMainImageCollapsed(),this.toggleMainImageCollapsed()},t.prototype.trackToggleMainImageCollapsed=function(){var e=this.props,t=e.location,o=e.newPhotosPageXp,n=e.trackZoomedInPhoto,a=e.trackZoomedOutPhoto,r=e.params,i=r.id;(0,T.getPhotosPageLocationStateFromLocationWithDefault)({newPhotosPageXp:o,location:t}).isMainImageCurrentlyCollapsed?n(i):a(i)},t.prototype.toggleMainImageCollapsed=function(){var e=this.props,t=e.isModal,o=e.location,n=e.newPhotosPageXp,a=e.onRequestPageModalResetScroll,r=this.context.router;t&&a(),r.replace((0,T.updatePhotosPageLocationState)({newPhotosPageXp:n,location:o},function(e){return{isMainImageCurrentlyCollapsed:!e.isMainImageCurrentlyCollapsed}}))},t.prototype.onMainImageLoad=function(e){this.setState({mainImageCurrentSrc:U(e.currentTarget)})},t.prototype.renderChildRoute=function(){var e=this.props,t=e.params,o=e.isBehindPageModal,n=e.location,a=e.maybePhoto,r=e.newPhotosPageXp,l=this.state,u=l.photoStatsRemoteData,s=l.photoFullInfoRemoteData,c=t.id,d=(0,T.getModalLocationStateFromLocation)(n),f=(0,g.mapMaybe)(function(e){return(0,v.checkPhotoEntityHasBasicInfo)(e)?e.urls.raw:void 0},a),p=(0,T.getPhotosPageLocationStateFromLocationWithDefault)({newPhotosPageXp:r,location:n}),h=(0,g.mapMaybe)(function(e){return e.initialSrc},p),m=(0,D.getPhotoChildRouteFromPathname)(n.pathname),y=function(){return!o&&void 0!==d};switch(m){case D.PhotoChildRoute.info:return y()&&i.default.createElement(C.default,{maybeCachedPhoto:a,photoId:c,modalLocationState:d,maybeMainImageCurrentSrc:h,maybeRawPhotoUrl:f,photoFullInfoRemoteData:s,photoStatsRemoteData:u});case D.PhotoChildRoute.share:return y()&&i.default.createElement(O.default,{maybeCachedPhoto:a,photoId:c,modalLocationState:d,maybeMainImageCurrentSrc:h,maybeRawPhotoUrl:f,photoFullInfoRemoteData:s});case void 0:return}},t.prototype.render=function(){var e=this.props,t=e.maybePhoto,o=e.isModal,n=e.location,a=e.isLoggedIn,r=e.isPhone,l=e.newPhotosPageXp,u=this.state,s=u.photoFullInfoRemoteData,c=u.relatedPhotoIdsRemoteData,d=(0,T.getPhotosPageLocationStateFromLocationWithDefault)({newPhotosPageXp:l,location:n}),f=d.isMainImageCurrentlyCollapsed,p=d.shouldTruncateDescription,h=(0,g.mapMaybe)(function(e){return e.initialSrc},d),m=!r;return i.default.createElement("div",{"data-test":k.TEST_ATTRIBUTE},i.default.createElement(R.default,{maybeCachedPhoto:t,isModal:o,location:n,photoFullInfoRemoteData:s,maybeMainImageInitialSrc:h,relatedPhotoIdsRemoteData:c,onMainImageLoad:this.onMainImageLoad,isMainImageCurrentlyCollapsed:f,shouldAllowMainImageCollapsingBehaviour:m,onRequestMainImageToggleCollapsed:this.onRequestMainImageToggleCollapsed,shouldTruncateDescription:p,onRequestToggleTruncatedDescription:this.onRequestToggleTruncatedDescription,isLoggedIn:a}),this.renderChildRoute())},t.contextTypes={router:r.PropTypes.object.isRequired},t}(r.PureComponent),H=function(){var e=(0,m.makeGetDenormalizedPhotoById)();return function(t,o){var n=o.params,a=n.id;return{maybePhoto:(0,g.normalizeMaybe)(e(t,a)),isPhone:(0,y.getIsPhone)(t),isLoggedIn:(0,_.getIsLoggedIn)(t),newPhotosPageXp:(0,E.getNewPhotosPageXp)(t)}}},W={updateData:c.updateData,updatePhotoStats:c.updatePhotoStats,setErrorFlash:c.setErrorFlash,trackZoomedInPhoto:c.trackZoomedInPhoto,trackZoomedOutPhoto:c.trackZoomedOutPhoto};t.default=(0,l.connect)(H,W)(F)},2175:function(e,t,o){"use strict";var n=o(20),a=o(2176);n.Observable.of=a.of},2176:function(e,t,o){"use strict";var n=o(2177);t.of=n.ArrayObservable.of},2177:function(e,t,o){"use strict";var n=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=o(20),r=o(2178),i=o(632),l=o(2179),u=function(e){function t(t,o){e.call(this),this.array=t,this.scheduler=o,o||1!==t.length||(this._isScalar=!0,this.value=t[0])}return n(t,e),t.create=function(e,o){return new t(e,o)},t.of=function(){for(var e=[],o=0;o<arguments.length;o++)e[o-0]=arguments[o];var n=e[e.length-1];l.isScheduler(n)?e.pop():n=null;var a=e.length;return a>1?new t(e,n):1===a?new r.ScalarObservable(e[0],n):new i.EmptyObservable(n)},t.dispatch=function(e){var t=e.array,o=e.index,n=e.count,a=e.subscriber;if(o>=n)return void a.complete();a.next(t[o]),a.closed||(e.index=o+1,this.schedule(e))},t.prototype._subscribe=function(e){var o=this.array,n=o.length,a=this.scheduler;if(a)return a.schedule(t.dispatch,0,{array:o,index:0,count:n,subscriber:e});for(var r=0;r<n&&!e.closed;r++)e.next(o[r]);e.complete()},t}(a.Observable);t.ArrayObservable=u},2178:function(e,t,o){"use strict";var n=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},a=o(20),r=function(e){function t(t,o){e.call(this),this.value=t,this.scheduler=o,this._isScalar=!0,o&&(this._isScalar=!1)}return n(t,e),t.create=function(e,o){return new t(e,o)},t.dispatch=function(e){var t=e.done,o=e.value,n=e.subscriber;if(t)return void n.complete();n.next(o),n.closed||(e.done=!0,this.schedule(e))},t.prototype._subscribe=function(e){var o=this.value,n=this.scheduler;if(n)return n.schedule(t.dispatch,0,{done:!1,value:o,subscriber:e});e.next(o),e.closed||e.complete()},t}(a.Observable);t.ScalarObservable=r},2179:function(e,t,o){"use strict";function n(e){return e&&"function"==typeof e.schedule}t.isScheduler=n},2180:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(2181);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(a).default}})},2181:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(1),r=n(a),i=o(1850),l=n(i),u=o(2184),s=n(u),c=function(e){var t=e.maybeCachedPhoto,o=e.photoId,n=e.maybeMainImageCurrentSrc,a=e.maybeRawPhotoUrl,i=e.photoFullInfoRemoteData,u=e.photoStatsRemoteData,c=e.modalLocationState;return r.default.createElement(l.default,{photoId:o,modalLocationState:c,maybeMainImageCurrentSrc:n,maybeRawPhotoUrl:a},r.default.createElement(s.default,{maybeCachedPhoto:t,photoFullInfoRemoteData:i,photoStatsRemoteData:u}))};t.default=c},2182:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(1),r=n(a),i=o(23),l=o(29),u=o(631),s=n(u),c=o(2183),d=n(c),f=function(e){return{backgroundImage:["linear-gradient(hsla(0, 0%, 100%, 0.8), white 150px)",(0,i.urlToBackgroundImage)(e)].join(", "),backgroundSize:["auto","cover"].join(", ")}},p=function(e){var t=e.maybeRawPhotoUrl,o=e.maybeMainImageCurrentSrc,n=function(e){return(0,i.buildImgixUrlDEPRECATED)({url:e,width:String(200),blur:String(20)})};return(0,l.orElseMaybe)(function(){return(0,l.mapMaybe)(n,t)},o)},h=function(e){var t=e.photoId,o=e.maybeRawPhotoUrl,n=e.maybeMainImageCurrentSrc,a=e.modalLocationState,i=e.children,u=p({maybeRawPhotoUrl:o,maybeMainImageCurrentSrc:n});return r.default.createElement(s.default,{redirectTo:{pathname:"/photos/"+t},modalLocationState:a,contentStyles:(0,l.mapMaybe)(f,u),contentClassName:d.default.modalContent},i)};t.default=h},2183:function(e,t){e.exports={modalContent:"_29NeT"}},2184:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(2185);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(a).default}})},2185:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a,r=o(1),i=n(r),l=o(12),u=o(1758),s=o(1781),c=o(29),d=o(23),f=o(53),p=o(69),h=o(561),m=n(h),y=o(31),_=n(y),v=o(2186),b=o(2187),g=n(b);!function(e){e[e.views=0]="views",e[e.downloads=1]="downloads",e[e.likes=2]="likes"}(a||(a={}));var P=function(e){switch(e){case a.views:return"eye-thin";case a.downloads:return"download-arrow-thin";case a.likes:return"heart-thin"}},T=function(e){switch(e){case a.views:return"Views";case a.downloads:return"Downloads";case a.likes:return"Likes"}},w=function(){return i.default.createElement("div",{className:g.default.container},i.default.createElement("div",{className:g.default.cell},i.default.createElement(m.default,{padContentBelow:!1})))},E=function(e){var t=e.statRemoteData;switch(t.type){case s.RemoteDataTypes.Success:var o=t.value;return i.default.createElement("dd",{className:g.default.statValue},i.default.createElement("span",{className:g.default.statValueTotal},(0,d.formatNumber)(o.total)),i.default.createElement("span",{className:g.default.statValueDelta},(0,d.formatNumberWithSign)(o.historical.change)," since last month"));case s.RemoteDataTypes.Loading:return i.default.createElement("dd",{className:g.default.statValue},"â€¦")}},I=function(e){var t=e.type,o=e.statRemoteData;return i.default.createElement("div",{className:g.default.stat},i.default.createElement("dt",{className:g.default.statLabel},i.default.createElement(_.default,{type:P(t),className:g.default.statLabelIcon}),i.default.createElement("span",{className:g.default.statLabelText},T(t))),E({statRemoteData:o}))},C=function(e){return i.default.createElement("dl",{key:"stats-body",className:g.default.stats},I({type:a.views,statRemoteData:e.views}),I({type:a.downloads,statRemoteData:e.downloads}),I({type:a.likes,statRemoteData:e.likes}))},S=function(e){return i.default.createElement("div",{key:"stats-failure",className:g.default.container},i.default.createElement("div",{className:g.default.cell},i.default.createElement("p",{className:g.default.p},"Sorry, there was an error loading stats. Please try again later.")))},O=function(e){var t=e.maybeCachedPhotoStats,o=e.photoStatsRemoteData;if(void 0!==t)return C({views:new s.Success(t.views),downloads:new s.Success(t.downloads),likes:new s.Success(t.likes)});switch(o.type){case s.RemoteDataTypes.NotAsked:return;case s.RemoteDataTypes.Failure:return S(o.value);case s.RemoteDataTypes.Success:var n=o.value;return C({views:new s.Success(n.views),downloads:new s.Success(n.downloads),likes:new s.Success(n.likes)});case s.RemoteDataTypes.Loading:return C({views:new s.Loading,downloads:new s.Loading,likes:new s.Loading})}},k=function(e){var t=e.photo,o=(0,v.getMetadata)({photo:t});return i.default.createElement("dl",{key:"metadata-body",className:g.default.metadata},o.map(function(e){var t=e.name,o=e.value;return i.default.createElement("div",{key:t,className:g.default.metadataItem},i.default.createElement("dt",{className:g.default.metadataItemName},t),i.default.createElement("dd",{className:g.default.metadataItemValue},o))}))},M=function(e){return i.default.createElement("div",{key:"metadata-failure",className:g.default.container},i.default.createElement("div",{className:g.default.cell},i.default.createElement("p",{className:g.default.p},"Sorry, there was an error loading metadata. Please try again later.")))},R=function(e){var t=e.cachedPhoto,o=e.photoFullInfoRemoteData;if((0,u.checkPhotoEntityHasFullInfo)(t))return k({photo:t});switch(o.type){case s.RemoteDataTypes.Success:return k({photo:o.value});case s.RemoteDataTypes.Loading:return i.default.createElement("div",{key:"loading"},w());case s.RemoteDataTypes.NotAsked:return;case s.RemoteDataTypes.Failure:return M(o.value)}},D=function(e){var t=e.auth,o=e.photo,n=function(){return void 0!==t.user&&t.user.username===o.user.username},a=function(){return n()?"/account/photos":t.isAdmin?"/super/photos/"+o.id+"/edit":void 0}(),r=(0,c.mapMaybe)(function(e){return{key:"edit-photo",component:i.default.createElement("a",{href:e},"Edit photo")}},a),l=(0,c.catMaybes)([r]);return l.length>0&&i.default.createElement("div",{key:"other-links",className:g.default.container},l.map(function(e){var t=e.key,o=e.component;return i.default.createElement("div",{key:t,className:g.default.cell},o)}))},N=function(e){var t=e.cachedPhoto,o=e.photoFullInfoRemoteData,n=e.photoStatsRemoteData,a=e.auth,r=(0,d.formatDate)(new Date(t.created_at)),l=(0,u.checkPhotoEntityHasStats)(t)?t.stats:void 0,s=(0,u.checkPhotoEntityHasFullInfo)(t)?(0,c.getOrElseMaybe)(function(){return"Info"},(0,c.normalizeMaybe)(t.story.title)):void 0,f=(0,c.catMaybes)([O({maybeCachedPhotoStats:l,photoStatsRemoteData:n}),R({cachedPhoto:t,photoFullInfoRemoteData:o}),D({photo:t,auth:a})]);return i.default.createElement("div",null,i.default.createElement("div",{className:g.default.container},i.default.createElement("div",{className:g.default.cell},(0,c.mapMaybe)(function(e){return i.default.createElement("h2",{className:g.default.title},e)},s),i.default.createElement("span",{className:g.default.datePublished},"Published on ",i.default.createElement("time",{dateTime:t.created_at},r)))),(0,p.intersperseComponentsArray)(f,function(e){return i.default.createElement("hr",{key:"separator-"+e,className:g.default.hr})}))},A=function(e){var t=e.maybeCachedPhoto,o=e.photoFullInfoRemoteData,n=e.photoStatsRemoteData,a=e.auth;if(void 0!==t&&(0,u.checkPhotoEntityHasBasicInfo)(t))return N({cachedPhoto:t,photoStatsRemoteData:n,auth:a,photoFullInfoRemoteData:o});switch(o.type){case s.RemoteDataTypes.Success:return N({cachedPhoto:o.value,photoStatsRemoteData:n,auth:a,photoFullInfoRemoteData:o});case s.RemoteDataTypes.Loading:return w();case s.RemoteDataTypes.NotAsked:case s.RemoteDataTypes.Failure:return null}},L=function(e,t){return{auth:(0,f.getAuth)(e)}};t.default=(0,l.connect)(L)(A)},2186:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMetadata=void 0;var n=o(29),a=function(e){return"Æ’/"+e},r=function(e){return e+"s"},i=function(e){return e+"mm"},l=function(e){return""!==e?e:void 0};t.getMetadata=function(e){var t=e.photo;return[{name:"Camera Make",value:l(t.exif.make)},{name:"Camera Model",value:(0,n.normalizeMaybe)(t.exif.model)},{name:"Focal Length",value:(0,n.mapMaybe)(i,(0,n.normalizeMaybe)(t.exif.focal_length))},{name:"Aperture",value:(0,n.mapMaybe)(a,(0,n.normalizeMaybe)(t.exif.aperture))},{name:"Shutter Speed",value:(0,n.mapMaybe)(r,(0,n.normalizeMaybe)(t.exif.exposure_time))},{name:"ISO",value:(0,n.normalizeMaybe)(t.exif.iso)},{name:"Dimensions",value:t.width+" Ã— "+t.height}].map(function(e){var t=e.name,o=e.value;return{name:t,value:(0,n.getOrElseMaybe)(function(){return"--"},o)}})}},2187:function(e,t){e.exports={colorGrey:"#999",containerPaddingUnit:"18px",cellPaddingUnit:"10px",headerFontSize:"21px",smallFontSize:"12px",container:"_11so1",cell:"_3aBA9",col:"Rs1Ko",title:"_2dIZQ",datePublished:"_1vScU",p:"_5UTXm",stats:"_19Kkj _11so1",stat:"_1H3Tk _3aBA9 Rs1Ko",statLabel:"_2FiKI",statLabelIcon:"_2nkiz",statLabelText:"B5nBa",statValue:"_2zoGD",statValueTotal:"_20G9q",statValueDelta:"_3R4g7",hr:"_1CXhw",metadata:"_1Z2CJ _11so1",metadataItem:"_1XYV- _3aBA9 Rs1Ko",metadataItemName:"_24YMC",metadataItemValue:"_3Dok4"}},2188:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(2189);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(a).default}})},2189:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(1),r=n(a),i=o(1850),l=n(i),u=o(2190),s=n(u),c=function(e){var t=e.maybeCachedPhoto,o=e.photoId,n=e.maybeMainImageCurrentSrc,a=e.maybeRawPhotoUrl,i=e.photoFullInfoRemoteData,u=e.modalLocationState;return r.default.createElement(l.default,{photoId:o,modalLocationState:u,maybeMainImageCurrentSrc:n,maybeRawPhotoUrl:a},r.default.createElement(s.default,{maybeCachedPhoto:t,photoFullInfoRemoteData:i}))};t.default=c},2190:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(2191);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(a).default}})},2191:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(1),r=n(a),i=o(13),l=n(i),u=o(1758),s=o(1781),c=o(25),d=o(607),f=o(561),p=n(f),h=o(635),m=n(h),y=o(634),_=n(y),v=o(31),b=n(v),g=o(2192),P=n(g),T=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++){t=arguments[o];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},w=function(){return r.default.createElement("div",{className:P.default.container},r.default.createElement("div",{className:P.default.cell},r.default.createElement(p.default,{padContentBelow:!1})))},E=function(e){var t=e.buttonShareProps,o=e.label,n=e.iconClassName;return r.default.createElement(_.default,T({},t,{className:P.default.shareLink,buttonType:"outline"}),r.default.createElement(b.default,{type:t.type,className:n}),r.default.createElement("span",{className:P.default.shareLinkText},o))},I=function(e){var t=e.photo,o="photos-page-share",n=t.links.html,a=(0,c.trackUrl)(n,{utmSource:"facebook",utmContent:o}),i=(0,c.trackUrl)(n,{utmSource:"twitter",utmContent:o}),u=(0,c.trackUrl)(n,{utmSource:"pinterest",utmContent:o}),s=(0,c.trackUrl)(n,{utmSource:"email",utmContent:o}),f=(0,d.getCreditText)(t.user),p=[{key:"facebook",props:{buttonShareProps:{type:"facebook",url:a},label:"Facebook",iconClassName:P.default.facebookShareLinkIcon}},{key:"pinterest",props:{buttonShareProps:{type:"pinterest",url:u,message:f},label:"Pinterest",iconClassName:P.default.pinterestShareLinkIcon}},{key:"twitter",props:{buttonShareProps:{type:"twitter",url:i,message:f},label:"Twitter",iconClassName:P.default.twitterShareLinkIcon}},{key:"email",props:{buttonShareProps:{type:"email",url:s},label:"Email",iconClassName:P.default.emailShareLinkIcon}}];return r.default.createElement("div",null,r.default.createElement("div",{className:P.default.container},r.default.createElement("div",{className:P.default.cell},r.default.createElement("h2",{className:P.default.title},"Share"),r.default.createElement("span",{className:P.default.photographer},"Photo by ",t.user.name)),r.default.createElement("div",{className:P.default.halfCell+" "+P.default.shareLinks},p.map(function(e){var t=e.key,o=e.props;return r.default.createElement("div",{key:t,className:(0,l.default)(P.default.halfCell,P.default.shareLinkContainer)},E(o))})),r.default.createElement("div",{className:P.default.cell},r.default.createElement(m.default,{buttonText:"Copy link"},t.links.html))))},C=function(e){var t=e.maybeCachedPhoto,o=e.photoFullInfoRemoteData;if(void 0!==t&&(0,u.checkPhotoEntityHasBasicInfo)(t))return I({photo:t});switch(o.type){case s.RemoteDataTypes.Success:return I({photo:o.value});case s.RemoteDataTypes.Loading:return w();case s.RemoteDataTypes.NotAsked:case s.RemoteDataTypes.Failure:return null}};t.default=C},2192:function(e,t){e.exports={spacingUnit:"4px",colorFacebook:"#3b5998",colorTwitter:"#1da1f2",colorPinterest:"#c92228",colorDarkGrey:"#777",containerPaddingUnit:"calc(4px * 4)",cellPaddingUnit:"calc(4px * 2)",cellPaddingUnitHalf:"4px",headerFontSize:"21px",smallFontSize:"12px",container:"_1OFta",cell:"_1EBGx",halfCell:"Jo1xA",title:"_9Hf2J",photographer:"pfcZe",shareLinks:"ZkC2g",shareLinkContainer:"lt4QO",shareLink:"_1szYK",shareLinkIcon:"_2rBQc",facebookShareLinkIcon:"_31Q2i _2rBQc",twitterShareLinkIcon:"_1OESI _2rBQc",pinterestShareLinkIcon:"_2-0Nn _2rBQc",emailShareLinkIcon:"_1hTw9 _2rBQc",shareLinkText:"_1kUwK"}},2193:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TEST_ATTRIBUTE="photos-route"},2194:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(2195);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(a).default}})},2195:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(1),r=n(a),i=o(313),l=n(i),u=o(13),s=n(u),c=o(2196),d=n(c),f=o(2205),p=o(212),h=o(1758),m=o(1781),y=o(561),_=n(y),v=o(2207),b=n(v),g=o(2209),P=n(g),T=o(2213),w=n(T),E=o(2221),I=n(E),C=o(2227),S=n(C),O=function(e){var t=e.location,o=e.maybeCachedPhoto,n=e.isModal,a=e.photoFullInfoRemoteData,i=e.maybeMainImageInitialSrc,u=e.relatedPhotoIdsRemoteData,c=e.isMainImageCurrentlyCollapsed,d=e.shouldAllowMainImageCollapsingBehaviour,y=e.onRequestMainImageToggleCollapsed,v=e.onMainImageLoad,g=e.shouldTruncateDescription,T=e.onRequestToggleTruncatedDescription,E=e.isLoggedIn,C=function(e){var o=e.photo,a=(0,f.buildPhotoHeadTags)(o),h=a.title,m=a.meta,_=a.canonicalUrl,C=n?155:200;return r.default.createElement("div",{className:(0,s.default)(S.default.wrapper,d&&S.default.wrapperForMainImageCollapseEnabled)},r.default.createElement(l.default,{title:h,meta:m,link:(0,p.buildLinks)(_)}),r.default.createElement("div",null,r.default.createElement("div",{className:(0,s.default)(n&&S.default.stickyHeaderContainer)},r.default.createElement(b.default,{photo:o,location:t,isLoggedIn:E})),r.default.createElement(P.default,{shouldAllowCollapsingBehaviour:d,isCurrentlyCollapsed:c,onRequestToggleCollapsed:y,maybeInitialSrc:i,photo:o,onImgLoad:v,magicalVerticalOffset:C}),r.default.createElement(w.default,{photo:o,location:t,shouldTruncateDescription:g,onRequestToggleTruncatedDescription:T})),r.default.createElement("div",{className:S.default.container},r.default.createElement(I.default,{photo:o,relatedPhotoIdsRemoteData:u,location:t})))};if(void 0!==o&&(0,h.checkPhotoEntityHasBasicInfo)(o))return C({photo:o});switch(a.type){case m.RemoteDataTypes.Success:return C({photo:a.value});case m.RemoteDataTypes.Loading:return function(){return r.default.createElement("div",{className:S.default.spinnerWrapper},r.default.createElement(_.default,{padContentBelow:!1}))}();case m.RemoteDataTypes.NotAsked:case m.RemoteDataTypes.Failure:return null}};O.displayName="Photos",t.default=(0,d.default)(O)},2196:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var a=o(2197),r=n(a),i=o(2204),l=n(i),u=o(1851),s=(n(u),o(1852)),c=(n(s),function(e){var t=(0,r.default)(function(e,t){return!(0,l.default)(e,t)});return t(e)});t.default=c},2197:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=o(1),u=o(1851),s=(n(u),o(1852)),c=(n(s),o(2200)),d=n(c),f=function(e){return function(t){var o=(0,d.default)(t),n=function(t){function n(){return a(this,n),r(this,t.apply(this,arguments))}return i(n,t),n.prototype.shouldComponentUpdate=function(t){return e(this.props,t)},n.prototype.render=function(){return o(this.props)},n}(l.Component);return n}};t.default=f},2198:function(e,t,o){"use strict";t.__esModule=!0;var n=function(e,t){return function(o){return o[e]=t,o}};t.default=n},2199:function(e,t,o){"use strict";t.__esModule=!0;var n=function(e){if("string"==typeof e)return e;if(e)return e.displayName||e.name||"Component"};t.default=n},2200:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var a=o(2201),r=n(a),i=o(2202),l=n(i),u=function(e){var t=(0,l.default)(e);return function(o,n){return(0,r.default)(!1,t,e,o,n)}};t.default=u},2201:function(e,t,o){"use strict";t.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},a=o(1),r=function(e){return e&&e.__esModule?e:{default:e}}(a),i=function(e,t,o,a,i){if(!e&&t)return o(i?n({},a,{children:i}):a);var l=o;return i?r.default.createElement(l,a,i):r.default.createElement(l,a)};t.default=i},2202:function(e,t,o){"use strict";t.__esModule=!0;var n=o(2203),a=function(e){return e&&e.__esModule?e:{default:e}}(n),r=function(e){return Boolean("function"==typeof e&&!(0,a.default)(e)&&!e.defaultProps&&!e.contextTypes)};t.default=r},2203:function(e,t,o){"use strict";t.__esModule=!0;var n=function(e){return Boolean(e&&e.prototype&&"function"==typeof e.prototype.render)};t.default=n},2204:function(e,t,o){"use strict";t.__esModule=!0;var n=o(226),a=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=a.default},2205:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=(0,f.default)(e,v.MAXIMUM_TITLE_TAGS_COUNT),o=t.map(function(e){return e.title});return(0,h.default)(o)}function r(e,t){var o=(0,c.default)(t,"story.title"),n="photo by "+e.name+" (@"+e.username+") on Unsplash";if(o)return(0,y.default)(o+" "+n);if(t.tags){var r=a(t.tags);return(0,y.default)(r+" HD "+n)}return"HD "+n}function i(e,t,o){var n=(void 0===o?{}:o).cleanVersion,r=void 0!==n&&n,i=[r?"Download this photo":"Download this free HD photo"];if(t.tags&&!r){var l=a(t.tags);i.push("of",l)}if((0,c.default)(t,"location.city")||(0,c.default)(t,"location.country")){var u=[t.location.city,t.location.country],s=u.filter(function(e){return!!e}).join(", ");i.push("in "+s)}return i.push("by "+e.name+" (@"+e.username+")"),i.join(" ")}function l(e){var t=e.id,o=e.slug;return"https://unsplash.com/photos/"+(o?t+"/"+o:t)}function u(e){var t=e.user,o=r(t,e),n=i(t,e),a=l(e),u=i(t,e,{cleanVersion:!0});return{title:o,description:n,canonicalUrl:a,meta:(0,_.buildPhotoMeta)(t,e,o,n,u,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.buildPhotoHeadTags=u;var s=o(47),c=n(s),d=o(576),f=n(d),p=o(2206),h=n(p),m=o(582),y=n(m),_=o(212),v=o(1759)},2206:function(e,t){/*!
 * array-to-sentence | MIT (c) Shinnosuke Watanabe
 * https://github.com/shinnn/array-to-sentence
*/
e.exports=function(e,t){"use strict";function o(e){if("string"!=typeof t[e])throw new TypeError(String(t[e])+" is not a string. `"+e+"` option must be a string.")}if(!Array.isArray(e))throw new TypeError(String(e)+" is not an array. Expected an array.");return t=t||{},void 0===t.separator?t.separator=", ":o("separator"),void 0===t.lastSeparator?t.lastSeparator=" and ":o("lastSeparator"),0===e.length?"":1===e.length?e[0]:e.slice(0,-1).join(t.separator)+t.lastSeparator+e[e.length-1]}},2207:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(2208);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(a).default}})},2208:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(1),r=n(a),i=o(13),l=n(i),u=o(1566),s=n(u),c=o(1568),d=n(c),f=o(1570),p=n(f),h=o(1569),m=n(h),y=o(1853),_=n(y),v=function(e){var t=e.className,o=e.location,n=e.photo,a=e.isLoggedIn,i=a?void 0:"green",u=a?"Download":"Download free";return r.default.createElement("header",{className:(0,l.default)(t,_.default.container)},r.default.createElement("div",{className:_.default.photographer},r.default.createElement(s.default,{includeAvatar:!0,user:n.user,secondaryLink:{label:"@"+n.user.username,href:n.user.links.html},type:"emphasiseUsername"})),r.default.createElement("div",{className:_.default.actions},r.default.createElement("div",{className:_.default.buttonCell},r.default.createElement(d.default,{photo:n,location:o})),r.default.createElement("div",{className:_.default.buttonCell},r.default.createElement(p.default,{photo:n,location:o})),r.default.createElement("div",{className:_.default.downloadButtonCell},r.default.createElement(m.default,{photo:n,showLabel:!0,showTooltip:!1,type:i,label:u,className:_.default.downloadButton}))))};t.default=v},2209:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(2210);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(a).default}})},2210:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(1),r=n(a),i=o(215),l=o(13),u=n(l),s=o(29),c=o(1658),d=o(572),f=o(587),p=n(f),h=o(31),m=n(h),y=o(2211),_=o(2212),v=n(_),b=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),g=function(e){function t(t){var o=e.call(this,t)||this;return o.renderOverlay=function(e){var t=e.shouldBecomeCollapsed,o=t?"zoom-in":"zoom-out";return r.default.createElement("div",{className:v.default.overlay},r.default.createElement("div",{className:v.default.overlayChild},r.default.createElement(m.default,{type:o,className:v.default.zoomToggleIcon})))},o.renderImage=function(){var e=o.props,t=e.photo,n=e.isCurrentlyCollapsed,a=e.shouldAllowCollapsingBehaviour,i=e.maybeInitialSrc,l=e.onImgLoad,u=e.magicalVerticalOffset,f=o.state.shouldUseInitialSrcIfAvailable,h=t.urls.raw,m=(0,y.createHelpers)({magicalVerticalOffset:u}),_=m.getImgSizesString,b=m.getImgSrcSetString,g=m.createFallbackSrc,P=a&&n,T=t.width,w=t.height,E={width:T,height:w},I=w/T,C=(0,d.ratioToPercentage)(I),S=_({shouldBecomeCollapsed:P,photoDimensions:E}),O=function(){return b({photoDimensions:E,baseUrl:h})},k=f?(0,s.getOrElseMaybe)(O,(0,s.mapMaybe)(function(e){return(0,c.serializeSrcSet)([{url:e}])},i)):O(),M=g(h);return r.default.createElement(p.default,{containerClassName:v.default.imagePlaceholder,containerStyle:{paddingBottom:C},key:t.id,sizes:S,srcSet:k,onLoad:l,src:M,alt:t.description})},o.state=o.getInitialState(),o}return b(t,e),t.prototype.getInitialState=function(){return{shouldUseInitialSrcIfAvailable:!0}},t.prototype.componentDidMount=function(){this.disableInitialSrc()},t.prototype.componentWillReceiveProps=function(e){var t=this.props.photo;e.photo.id!==t.id&&this.setState(this.getInitialState)},t.prototype.componentDidUpdate=function(){var e=this;this.state.shouldUseInitialSrcIfAvailable&&requestAnimationFrame(function(){requestAnimationFrame(function(){e.state.shouldUseInitialSrcIfAvailable&&e.disableInitialSrc()})})},t.prototype.disableInitialSrc=function(){this.setState({shouldUseInitialSrcIfAvailable:!1})},t.prototype.render=function(){var e=this,t=this.props,o=t.photo,n=t.onRequestToggleCollapsed,a=t.isCurrentlyCollapsed,l=t.shouldAllowCollapsingBehaviour,s=t.magicalVerticalOffset,c=(0,y.createHelpers)({magicalVerticalOffset:s}),d=c.getMinAndMaxWidthsLengths,f=c.getPaddingConstants,p=l&&a,h=f(),m=h.HORIZONTAL_PADDING_LENGTH,_=h.VERTICAL_PADDING_LENGTH,b=o.width,g=o.height,P={width:b,height:g},T=d({photoDimensions:P}),w=T.minWidthLength,E=T.maxWidthLength,I=(0,u.default)(v.default.imageButton,function(){return l?a?v.default.imageButtonCollapsed:v.default.imageButtonExpanded:void 0}()),C=l?i.Option.some(n):i.Option.none();return r.default.createElement("div",{style:p?{padding:_+" "+m}:{}},r.default.createElement("div",{className:v.default.imageContainer,style:p?{minWidth:w,maxWidth:E}:{}},C.map(function(t){return r.default.createElement("button",{className:I,onClick:t},e.renderOverlay({shouldBecomeCollapsed:p}),e.renderImage())}).getOrElseL(this.renderImage)))},t}(a.PureComponent);t.default=g},2211:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createHelpers=void 0;var n=o(89),a=function(e){return e&&e.__esModule?e:{default:e}}(n),r=o(23),i=o(602),l=o(29),u=o(1658),s=o(572),c=o(1853),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(c),f=function(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var n,a,r=o.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(o=r.return)&&o.call(r)}finally{if(a)throw a.error}}return i},p=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e};t.createHelpers=function(e){var t=e.magicalVerticalOffset,o=function(){var e=(0,s.numberToPixels)(10),o=20+t,n=(0,s.pixelsToNumber)(d.outerHorizontalGutter);return{TOTAL_HORIZONTAL_PADDING:2*n,TOTAL_VERTICAL_PADDING:o,HORIZONTAL_PADDING_LENGTH:(0,s.numberToPixels)(n),VERTICAL_PADDING_LENGTH:e}},n=o(),c=n.TOTAL_HORIZONTAL_PADDING,f=n.TOTAL_VERTICAL_PADDING,h=function(){var e=o(),t=e.TOTAL_HORIZONTAL_PADDING,n=e.TOTAL_VERTICAL_PADDING;return{IMAGE_WIDTH_CONSTRAINED_TO_VIEWPORT_WIDTH_LENGTH:(0,s.createCssCalc)("100vw - "+(0,s.numberToPixels)(t)),IMAGE_HEIGHT_CONSTRAINED_TO_VIEWPORT_HEIGHT_LENGTH:(0,s.createCssCalc)("100vh - "+(0,s.numberToPixels)(n))}}(),m=h.IMAGE_WIDTH_CONSTRAINED_TO_VIEWPORT_WIDTH_LENGTH,y=h.IMAGE_HEIGHT_CONSTRAINED_TO_VIEWPORT_HEIGHT_LENGTH,_=function(e){return e.map(function(e){return(0,l.catMaybes)([e.mediaCondition,e.width]).join(" ")}).join(", ")},v=function(e){var t=e.photoDimensions,o=t.width,n=t.height,a=o/n,r=function(e){return Math.ceil(e*a)};return{lowerBound:r(500),upperBound:r(n)}},b=function(e){var t=e.photoDimensions,o=e.baseUrl,n=v({photoDimensions:t}),a=n.lowerBound,r=n.upperBound;return(0,u.generateImgWidthSrcSetString)({baseUrl:o,lowerBound:a,upperBound:r,interval:300})},g=function(e){var t=e.photoDimensions;if((0,i.isSquareOrPortraitPhoto)(t)){var o=t.width,n=t.height,a=o/n;return function(e){return Math.ceil(e*a)}(500)}return 500},P=function(e){var t=e.photoDimensions,o=t.width,n=t.height,a=o/n,r=g({photoDimensions:t});return{minWidthLength:(0,s.numberToPixels)(r),maxWidthLength:function(e){return(0,s.createCssCalc)("("+e+") * "+a)}(y)}},T=function(e){var t=e.photoDimensions,o=t.width,n=t.height,a=n/o,r=g({photoDimensions:t}),i=function(e){return Math.ceil(e*a)}(r);return{isMinSizeMediaConditions:["(max-width: "+(0,s.numberToPixels)(r+c)+")","(max-height: "+(0,s.numberToPixels)(i+f)+")"],isConstrainedByViewportHeightMediaCondition:"(min-aspect-ratio: "+o+"/"+n+")"}},w=function(e){var t=e.photoDimensions;if(e.shouldBecomeCollapsed){var o=P({photoDimensions:t}),n=o.minWidthLength,a=o.maxWidthLength,r=T({photoDimensions:t}),i=r.isMinSizeMediaConditions,l=r.isConstrainedByViewportHeightMediaCondition;return p(i.map(function(e){return{mediaCondition:e,width:n}}),[{mediaCondition:l,width:a},{width:m}])}return[{width:"100vw"}]},E=(0,a.default)(w,_);return{getPaddingConstants:o,getImgSrcSetString:b,getMinAndMaxWidthsLengths:P,getImgSizesString:E,createFallbackSrc:function(e){return(0,r.buildImgixUrlDEPRECATED)({url:e,width:String(1e3),q:"80"})}}}},2212:function(e,t){e.exports={resetBtn:"DWLeW",spacingUnit:"4px",center:"_3vQsl",imagePlaceholder:"_2yFK-",imageContainer:"_1ac-D _3vQsl",imageButton:"_1szcv DWLeW",overlay:"_2MKkb",imageButtonExpanded:"_2bRfu",imageButtonCollapsed:"_1epAc",overlayChild:"_1w7cG",zoomToggleIcon:"_1NYtf"}},2213:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(2214);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(a).default}})},2214:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(1),r=n(a),i=o(32),l=o(1758),u=o(29),s=o(39),c=o(607),d=o(31),f=n(d),p=o(2215),h=n(p),m=o(603),y=o(2218),_=n(y),v=o(2219),b=n(v),g=function(e){var t=e.photo,o=e.location,n=e.shouldTruncateDescription,a=e.onRequestToggleTruncatedDescription,d={pathname:(0,m.getPhotoInfoRoute)({photoId:t.id}),state:o.state},p={pathname:(0,m.getPhotoShareRoute)({photoId:t.id}),state:o.state},y=(0,l.checkPhotoEntityHasFullInfo)(t)?(0,u.normalizeMaybe)(t.story.description):void 0,v=(0,l.checkPhotoEntityHasFullInfo)(t)?(0,u.mapMaybe)(function(e){return(0,u.normalizeMaybe)(e.title)},t.location):void 0,g=(0,c.getCreditText)(t.user),P={url:t.links.html,title:t.description,text:g};return r.default.createElement("div",{className:_.default.container},r.default.createElement("div",{className:_.default.textContainer},(0,u.mapMaybe)(function(e){return r.default.createElement(i.Link,{to:(0,s.buildSearchUrl)(e),className:_.default.locationLink},r.default.createElement(f.default,{type:"location",className:_.default.locationIcon}),r.default.createElement("span",{className:_.default.locationTitle},e))},v),(0,u.mapMaybe)(function(e){return r.default.createElement("div",{className:_.default.descriptionContainer},r.default.createElement(h.default,{text:e,containerClassName:_.default.descriptionNotTruncated,truncatedContainerClassName:_.default.descriptionTruncated,shouldTruncate:n,shouldShowTruncateButton:!1,onRequestToggle:a}))},y)),r.default.createElement(b.default,{shareLocationDescriptor:p,shareOptions:P,buttonProps:{className:_.default.shareButton},linkProps:{className:_.default.shareLink}},r.default.createElement(f.default,{className:_.default.linkIcon,type:"share"}),r.default.createElement("span",{className:_.default.linkText},"Share")),r.default.createElement(i.Link,{className:_.default.action,to:d},r.default.createElement(f.default,{className:_.default.linkIconWithPadding,type:"info"}),r.default.createElement("span",{className:_.default.linkText},"Info")))};g.displayName="Footer",t.default=g},2215:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(2216);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(a).default}})},2216:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(1),r=n(a),i=o(13),l=n(i),u=o(29),s=o(2217),c=n(s),d=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),f=function(e){return e.offsetWidth<e.scrollWidth},p=function(e){function t(t){var o=e.call(this,t)||this;return o.state=o.getInitialState(),o}return d(t,e),t.prototype.getInitialState=function(){return{doesRequireTruncation:!0}},t.prototype.componentDidMount=function(){this.updateRequiresTruncation()},t.prototype.componentDidUpdate=function(e){e.text!==this.props.text&&this.updateRequiresTruncation()},t.prototype.updateRequiresTruncation=function(){if(this.props.shouldTruncate&&(0,u.isNotUndefinedOrNull)(this.textElRef)){var e=f(this.textElRef),t=e;this.setState({doesRequireTruncation:t})}},t.prototype.render=function(){var e=this,t=this.props,o=t.text,n=t.truncatedContainerClassName,a=t.containerClassName,i=t.shouldTruncate,u=t.shouldShowTruncateButton,s=t.onRequestToggle,d=this.state.doesRequireTruncation,f=d&&(!!i||u);return r.default.createElement("div",{className:(0,l.default)(c.default.container,i?[c.default.containerTruncated,n]:a)},r.default.createElement("p",{ref:function(t){e.textElRef=t},className:(0,l.default)(c.default.text,d&&i?c.default.textTruncated:c.default.textNotTruncated)},o)," ",f&&r.default.createElement("button",{className:c.default.toggleButton,onClick:s},i?"Read more":"Show less"))},t.displayName="TruncatedTextToggle",t}(a.PureComponent);t.default=p},2217:function(e,t){e.exports={colorLightBlack:"#111",colorGrey:"#999",truncate:"_1ByhS",resetBtn:"DWLeW",containerTruncated:"_3PLD4",text:"KNDj7",textNotTruncated:"_2FfeD",textTruncated:"b5rtm _1ByhS",toggleButton:"_19oEl DWLeW",expandButton:"_2mJKr"}},2218:function(e,t){e.exports={spacingUnit:"4px",resetBtn:"DWLeW",colorGrey:"#999",colorLightBlack:"#111",truncate:"_1ByhS",fontWeightMedium:"xLon9",smallFontSize:"12px",link:"_1dUIs",container:"_1ltEq",halfCell:"_3kEvh",textContainer:"_2DxLe _3kEvh",textContainerNotTruncated:"gfzKD",textContainerTruncated:"OD7Kw",locationLink:"_2RL3a xLon9",locationIcon:"_15of1 _3kEvh",locationTitle:"_20NLS _1ByhS",descriptionContainer:"_10Trd _3kEvh",descriptionNotTruncated:"Tly8r",descriptionTruncated:"_2UE6C",action:"_2wtkH _3kEvh xLon9",linkIcon:"zW0jE",linkIconWithPadding:"H7PLe zW0jE _3kEvh",linkText:"_1S-Rs _3kEvh",shareLinkOrButton:"P_Gsg _2wtkH _3kEvh xLon9",shareLink:"_20YfC P_Gsg _2wtkH _3kEvh xLon9",shareButton:"_1giCj DWLeW P_Gsg _2wtkH _3kEvh xLon9 _1dUIs"}},2219:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(2220);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(a).default}})},2220:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(1),a=function(e){return e&&e.__esModule?e:{default:e}}(n),r=o(32),i=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),l=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++){t=arguments[o];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},u=function(e){function t(){var t=e.call(this)||this;return t.openWebShare=function(){var e=t.props.shareOptions;void 0!==window.navigator.share?window.navigator.share(e):console.warn("Web Share API not found.")},t.state=t.getInitialState(),t}return i(t,e),t.prototype.getInitialState=function(){return{hasWebShareApi:void 0!==window.navigator.share}},t.prototype.render=function(){var e=this.props,t=e.shareLocationDescriptor,o=e.children,n=e.buttonProps,i=e.linkProps;return this.state.hasWebShareApi?a.default.createElement("button",l({onClick:this.openWebShare},n),o):a.default.createElement(r.Link,l({to:t},i),o)},t}(n.PureComponent);t.default=u},2221:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(2222);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(a).default}})},2222:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(1),r=n(a),i=o(29),l=o(1758),u=o(1785),s=n(u),c=o(2223),d=n(c),f=o(2225),p=n(f),h=function(e){var t=e.photo,o=e.location,n=e.relatedPhotoIdsRemoteData,a=(0,l.checkPhotoEntityHasFullInfo)(t)?t.related_collections:void 0,u=(0,l.checkPhotoEntityHasFullInfo)(t)?t.tags:void 0;return r.default.createElement("div",null,r.default.createElement(d.default,{photoIdsRemoteData:n,location:o}),(0,i.mapMaybe)(function(e){return r.default.createElement(p.default,{relatedCollections:e})},a),r.default.createElement(s.default,{headingCopy:"Related tags",keywords:u,showHeading:!0}))};t.default=h},2223:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(2224);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(a).default}})},2224:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(1),r=n(a),i=o(1781),l=o(1801),u=o(1608),s=n(u),c=o(561),d=n(c),f=o(1854),p=n(f),h=(0,l.mapPhotoIdsToPhotos)(s.default),m=function(e){var t=e.photoIdsRemoteData,o=e.location,n=function(e){var t=e.bodyPhotoIdsRemoteData;switch(t.type){case i.RemoteDataTypes.Success:return r.default.createElement(h,{photoIds:t.value,location:o,shouldUseContainerPadding:!1});case i.RemoteDataTypes.Loading:return r.default.createElement(d.default,{padContentBelow:!1})}},a=function(e){var t=e.bodyPhotoIdsRemoteData;return r.default.createElement("div",null,r.default.createElement("h2",{className:p.default.heading},"Related photos"),n({bodyPhotoIdsRemoteData:t}))};switch(t.type){case i.RemoteDataTypes.Loading:return a({bodyPhotoIdsRemoteData:t});case i.RemoteDataTypes.Success:return 0===t.value.length?null:a({bodyPhotoIdsRemoteData:t});case i.RemoteDataTypes.Failure:case i.RemoteDataTypes.NotAsked:return null}};t.default=m},2225:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(2226);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(a).default}})},2226:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(1),r=n(a),i=o(1727),l=n(i),u=o(1758),s=o(1854),c=n(s),d=function(e){var t=e.relatedCollections,o=t.type===u.RelatedCollectionsType.related?"Related collections":"Featured in "+t.total+" collections";return 0===t.results.length?null:r.default.createElement("div",null,r.default.createElement("p",{className:c.default.heading},o),r.default.createElement("div",null,t.results.map(function(e,t){return r.default.createElement(l.default,{key:t,collection:e,columns:3})})))};d.displayName="RelatedCollections",t.default=d},2227:function(e,t){e.exports={container:"_1OYbO _2sCnE PrOBO _1CR66",wrapper:"WMwuA",stickyHeaderContainer:"_33qjA",spinnerWrapper:"xn9xU"}}});
//# sourceMappingURL=photos-route.aa94f.main.js.map